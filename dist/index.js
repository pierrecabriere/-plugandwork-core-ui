function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("axios")),n=e(require("lodash")),r=require("redux-devtools-extension"),o=require("@reduxjs/toolkit"),i=require("react"),a=e(i),c=e(require("bson-objectid")),s=e(require("faye")),u=e(require("rxjs-auth")),p=require("react-is"),l=e(p);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var v=t.create({baseURL:process.env.REACT_APP_PAW_HOST||""}),y=Object.prototype.hasOwnProperty,m=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),g=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},b={arrayToObject:g,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var s=a[c],u=i[s];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:i,prop:s}),n.push(u))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(r):o<128?n+=m[o]:o<2048?n+=m[192|o>>6]+m[128|63&o]:o<55296||o>=57344?n+=m[224|o>>12]+m[128|o>>6&63]+m[128|63&o]:(o=65536+((1023&o)<<10|1023&t.charCodeAt(r+=1)),n+=m[240|o>>18]+m[128|o>>12&63]+m[128|o>>6&63]+m[128|63&o])}return n},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(r.plainObjects||r.allowPrototypes||!y.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=g(t,r)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,o){y.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=e(t[o],n,r):t.push(n):t[o]=n}),t):Object.keys(n).reduce(function(t,o){var i=n[o];return t[o]=y.call(t,o)?e(t[o],i,r):i,t},o)}},E=String.prototype.replace,w=/%20/g,O={default:"RFC3986",formatters:{RFC1738:function(e){return E.call(e,w,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},P={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},_=Date.prototype.toISOString,N={delimiter:"&",encode:!0,encoder:b.encode,encodeValuesOnly:!1,serializeDate:function(e){return _.call(e)},skipNulls:!1,strictNullHandling:!1},j=function e(t,n,r,o,i,a,c,s,u,p,l,f){var d=t;if("function"==typeof c)d=c(n,d);else if(d instanceof Date)d=p(d);else if(null===d){if(o)return a&&!f?a(n,N.encoder):n;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||b.isBuffer(d))return a?[l(f?n:a(n,N.encoder))+"="+l(a(d,N.encoder))]:[l(n)+"="+l(String(d))];var h,v=[];if(void 0===d)return v;if(Array.isArray(c))h=c;else{var y=Object.keys(d);h=s?y.sort(s):y}for(var m=0;m<h.length;++m){var g=h[m];i&&null===d[g]||(v=Array.isArray(d)?v.concat(e(d[g],r(n,g),r,o,i,a,c,s,u,p,l,f)):v.concat(e(d[g],n+(u?"."+g:"["+g+"]"),r,o,i,a,c,s,u,p,l,f)))}return v},T=function(e,t){var n=e,r=t?b.assign({},t):{};if(null!=r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===r.delimiter?N.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:N.strictNullHandling,a="boolean"==typeof r.skipNulls?r.skipNulls:N.skipNulls,c="boolean"==typeof r.encode?r.encode:N.encode,s="function"==typeof r.encoder?r.encoder:N.encoder,u="function"==typeof r.sort?r.sort:null,p=void 0!==r.allowDots&&r.allowDots,l="function"==typeof r.serializeDate?r.serializeDate:N.serializeDate,f="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:N.encodeValuesOnly;if(void 0===r.format)r.format=O.default;else if(!Object.prototype.hasOwnProperty.call(O.formatters,r.format))throw new TypeError("Unknown format option provided.");var d,h,v=O.formatters[r.format];"function"==typeof r.filter?n=(h=r.filter)("",n):Array.isArray(r.filter)&&(d=h=r.filter);var y=[];if("object"!=typeof n||null===n)return"";var m=P[r.arrayFormat in P?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices"];d||(d=Object.keys(n)),u&&d.sort(u);for(var g=0;g<d.length;++g){var E=d[g];a&&null===n[E]||(y=y.concat(j(n[E],E,m,i,a,c?s:null,h,u,p,l,v,f)))}var w=y.join(o);return w.length>0?(!0===r.addQueryPrefix?"?":"")+w:""},x=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var a=i[o];if(!("_owner"===a&&t.$$typeof||e(t[a],n[a])))return!1}return!0}return t!=t&&n!=n},k=function(){function e(e){var t=this;return void 0===e&&(e={}),this.relationships=[],this.__populated=!1,this.id=e.id||(new c).toString(),this.attributes=e.attributes||{},new Proxy(this,{get:function(r,o){r=t;var i=function(e){return"string"==typeof e&&Reflect.ownKeys(r.relationships).includes(e)?n.get(r.relationships,e):void 0!==n.get(r.attributes,e)?n.get(r.attributes,e):n.get(r,e)};switch(o){case"constructor":return r.constructor;case"attributes":return r.attributes;case"relationships":return e.relationships;case"_raw":return e;case"id":return r.id;case"get":return i}return i(o)}})}e.clearCache=function(){delete this._cache},e.create=function(e,t){void 0===t&&(t=!1);try{var n=this;return Promise.resolve(h(function(){return Promise.resolve(v.post("/api/d2/"+n.apiType,{data:{attributes:e}})).then(function(e){var t=e.data.data,r=new n(t);return n.clearCache(),n.store.dispatch({type:"UPSERT",payload:t}),r})},function(e){if(t)return alert("Une erreur est survenue, impossible de créer cet élément"),void console.error(e);throw e}))}catch(e){return Promise.reject(e)}},e.get=function(e,t){var n=this,r=!t&&this.list.find(function(t){return t.id===e});return r||!1===t?r:new Promise(function(t,r){try{var o=h(function(){return Promise.resolve(n.fetch(e,{count:!1})).then(function(e){t(n.get(e.id,!1))})},function(e){r(e)});return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(e){return Promise.reject(e)}})},e.fetch=function(e,t){void 0===t&&(t={count:!0,refresh:!1,forceD2:!1});try{var n=this,r=t.count,o=t.refresh,i=t.forceD2,a=JSON.stringify({query:e,count:r});return Promise.resolve(n.cache[a]&&!o?n.cache[a]:h(function(){var t={method:"GET"};if("string"==typeof e)t.url="/api/d2/"+n.apiType+"/"+e;else if(!i&&n.d3Compatible&&(e.search||e.title))t.method="POST",t.url="/api/d3/search/"+n.apiType,t.data=e;else{var o=T(e,{arrayFormat:"brackets"});t.url="/api/d2/"+n.apiType+"?"+o}return Promise.resolve(v(t)).then(function(e){var t=e.data,o=n.setDatas(t);return n.cache[a]=r?{count:t.meta.pagination.total_objects,data:o}:o,n.cache[a]})},function(){return[]}))}catch(e){return Promise.reject(e)}},e.bulkUpdate=function(e,t,n){try{var r,o=this,i=function(){var e=r.map(function(e){return{method:"PATCH",url:n+"/"+e,body:{data:{attributes:t}}}});return Promise.resolve(v.post("/api/d2/batch_sequential",{requests:e})).then(function(){})};n=n||"/api/d2/"+o.apiType;var a=function(){if(!Array.isArray(e))return Promise.resolve(o.fetch(e)).then(function(e){r=e.data.map(function(e){return e.id})})}();return Promise.resolve(a&&a.then?a.then(i):i())}catch(e){return Promise.reject(e)}},e.setDatas=function(e,t){var n=this;void 0===t&&(t=!0);try{var r=e.data;return t&&this.store.dispatch({type:"UPSERT",payload:r}),Array.isArray(r)?r.map(function(e){return n.list.find(function(t){return t.id===e.id})||new n(e)}):this.list.find(function(e){return e.id===r.id})||new this(r)}catch(e){return[]}};var t,i=e.prototype;return i.populate=function(){try{var e=this;if(e.__populated)return Promise.resolve();var t=h(function(){var t=Object.getPrototypeOf(e).constructor.apiType;return Promise.resolve(v.get("/api/d2/"+t+"/"+e.id)).then(function(t){Object.assign(e,t.data.data),e.__populated=!0})},function(e){alert("Une erreur est survenue, impossible de peupler cet élément"),console.error(e)});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},i.update=function(e){try{var t=this,n=Object.getPrototypeOf(t).constructor,r=h(function(){return Promise.resolve(v.patch("/api/d2/"+n.apiType+"/"+t.id,{data:{attributes:e}})).then(function(e){n.store.dispatch({type:"UPDATE",payload:e.data.data}),n.clearCache()})},function(e){alert("Une erreur est survenue, impossible de mettre à jour cet élément"),console.error(e)});return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},i.delete=function(e){void 0===e&&(e=!1);try{var t=this;if(!e&&!window.confirm("Voulez-vous vraiment supprimer cet élément ?"))return Promise.resolve();var n=Object.getPrototypeOf(t).constructor,r=h(function(){return Promise.resolve(v.delete("/api/d2/"+n.apiType+"/"+t.id)).then(function(){n.store.dispatch({type:"DELETE",payload:t}),n.clearCache()})},function(t){e||alert("Une erreur est survenue, impossible de supprimer cet élément"),console.error(t)});return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},e.connect=function(e,t){return void 0===t&&(t={}),function(e,t,n){return function(r){return function(o){function i(t){var r;(r=o.call(this,t)||this).configure=function(e,t){var n=e.query,o=e.page,i=e.pageSize,a=e.sort;void 0===t&&(t=!1);try{var c={};return void 0===n||!t&&x(n,r.state.query)||(c.query=n),void 0===o||!t&&x(o,r.state.page)||(c.page=o),void 0===i||!t&&x(i,r.state.pageSize)||(c.pageSize=i),void 0===a||!t&&x(a,r.state.sort)||(c.sort=a),Object.keys(c).forEach(function(e){null===c[e]&&(c[e]=void 0)}),r.setState(c),Promise.resolve()}catch(e){return Promise.reject(e)}},r.fetchData=function(t,n){return void 0===t&&(t=r.state.query),void 0===n&&(n=!1),r.setState({loading:!0}),new Promise(function(o){try{var i,a=function(){r.setState({ids:c,count:i,loading:!1},o)},c=[],s=function(){if(t&&"object"==typeof t){var o=r.state,a=Object.assign({},t,{page:o.page,per_page:o.pageSize,sort:o.sort});return Promise.resolve(e.fetch(a,{refresh:n})).then(function(e){var t;i=e.count,c=(null===(t=e.data)||void 0===t?void 0:t.map(function(e){return e.id}))||[]})}var s=function(){if("string"==typeof t)return Promise.resolve(e.get(t,!0)).then(function(e){c=e?[e.id]:[]})}();if(s&&s.then)return s.then(function(){})}();return Promise.resolve(s&&s.then?s.then(a):a())}catch(e){return Promise.reject(e)}})},r.handleNextPage=function(){r.configure({page:r.state.page+1})},r.handlePrevPage=function(){r.state.page<=1||r.configure({page:r.state.page-1})},r.handleRefresh=function(){r.fetchData(r.state.query,!0)};var i={query:{},loading:!1,ids:[],count:void 0,pageSize:10,page:1,sort:void 0};return r.state=n.init&&"object"==typeof n.init?Object.assign({},i,n.init):i,r.prevLength=e.list.length,r}d(i,o);var c=i.prototype;return c.componentDidMount=function(){var t=this;this.unsubscribe=e.store.subscribe(function(){try{var n=e.store.getState().list;return t.prevLength!==n.length&&(t.fetchData(),t.prevLength=n.length),t.forceUpdate(),Promise.resolve()}catch(e){return Promise.reject(e)}}),n.init&&this.fetchData()},c.componentDidUpdate=function(e,t){return!(!(x(this.state.query,t.query)&&x(this.state.page,t.page)&&x(this.state.pageSize,t.pageSize)&&x(this.state.sort,t.sort))&&this.state.query)||this.fetchData()},c.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},c.getList=function(){var t=e.list;return this.state.ids.map(function(e){return t.find(function(t){return t.id===e})}).filter(Boolean)},c.render=function(){var e,n=f({},this.props,((e={})[t]={__connected:this,list:this.getList(),count:this.state.count,current:{page:this.state.page,pageSize:this.state.pageSize},refresh:this.handleRefresh,query:this.state.query,loading:this.state.loading,configure:this.configure,nextPage:this.handleNextPage,prevPage:this.handlePrevPage},e));return a.createElement(r,n)},i}(a.Component)}}(this,e,t)},(t=[{key:"cache",get:function(){return this._cache||(this._cache={}),this._cache}},{key:"store",get:function(){var e,t,n;return this._store||(this._store=(t={list:[],loading:!1},n=r.composeWithDevTools({name:(e=this).toString().split("(")[0].split(" ")[1]}),o.createStore(function(n,r){void 0===n&&(n=t);var o=r.payload;switch(r.type){case"LOAD":return f({},n,{loading:!0});case"UNLOAD":return f({},n,{loading:!1});case"UPSERT":var i=function(e){var t=n.list.find(function(t){return t.id===e.id});n=f({},n,t?{list:n.list.map(function(n){return n===t?e:n})}:{list:[].concat(n.list,[e])})};return Array.isArray(o)?o.forEach(function(t){return i(t instanceof e?t:new e(t))}):i(o instanceof e?o:new e(o)),n;case"UPDATE":return function(e){var t=n.list.find(function(t){return t.id===e.id});t&&(n=f({},n,{list:n.list.map(function(e){return e===t&&Object.assign(e,o),e})}))}(o instanceof e?o:new e(o)),n;case"DELETE":var a=n.list.find(function(e){return e.id===o.id});return f({},n,{list:[].concat(n.list.filter(function(e){return e!==a}))});case"REINIT":return{list:[]};default:return n}},void 0,n(o.applyMiddleware())))),this._store}},{key:"list",get:function(){return this.store.getState().list}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,t),e}();k.d3Compatible=!0,k.currentPage=1,k.links={first:null,last:null,next:null,prev:null,self:null};var R=function(){function e(t,n){if(Object.getPrototypeOf(this).constructor===e){var r=e.getFieldFromType(t.type);return this.type=r.type,new r(t,n)}return Object.assign(this,t),this.slug=n,this.type=Object.getPrototypeOf(this).constructor.type,this}e.getFieldFromType=function(e){switch(e){case"Select":return S;case"JSON":return A;default:return D}};var t=e.prototype;return t.encode=function(e){return e},t.decode=function(e){return e},e}(),S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).options=[],t}d(t,e);var n=t.prototype;return n.encode=function(e){if(this.options.find(function(t){return t.value===e}))return e;var t=this.options.find(function(t){return t.label===e});return(null==t?void 0:t.value)||null},n.decode=function(e){var t=this.options.find(function(t){return t.value===e});return(null==t?void 0:t.label)||null},t}(R);S.type="Select";var D=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var n=t.prototype;return n.encode=function(e){return(null==e?void 0:e.toString())||""},n.decode=function(e){return(null==e?void 0:e.toString())||""},t}(R);D.type="Text";var A=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var n=t.prototype;return n.encode=function(e){try{return JSON.stringify(e)}catch(e){return"{}"}},n.decode=function(e){try{return JSON.parse(e)}catch(e){return{}}},t}(R);A.type="JSON";var C=function(){function e(){}return e.getSettingsFields=function(){var e=this.settings.schema;return e&&"object"==typeof e?Object.keys(e).map(function(t){var n=e[t];return n instanceof R?n:new R(e[t],t)}):[]},e.onInstall=function(e){return Promise.resolve()},e.onUninstall=function(e){return Promise.resolve()},e}();C.component=function(e){return a.createElement("div",null,"Hello World !")},C.publicComponent=function(e){return a.createElement("div",null,"Hello World !")},C.settings={},C.icon=null,C.handleDoc=function(){return!1};var V={__proto__:null,PlugandworkModel:k,PlugandworkApp:C,SettingsField:R},U=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);U.apiType="apps";var L=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);L.apiType="blocs";var I=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);I.apiType="contexts",I.d3Compatible=!1;var q,M="object"==typeof self?self.FormData:window.FormData,H=["file","title"],F=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t.create=function(e){try{var t=this,n="/api/d2/"+t.apiType,r={data:{attributes:e}};if(e.file){var o=new M;o.append("file",e.file);var i=e.file,a=e.title,c=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,H);n="/api/d2/"+t.apiType+"?"+T({name:a||i.name,data:{attributes:c}},{arrayFormat:"brackets"}),r=o}return Promise.resolve(v.post(n,r,{})).then(function(e){var n=e.data.data;return t.clearCache(),t.store.dispatch({type:"UPSERT",payload:n}),new t(n)})}catch(e){return Promise.reject(e)}},t.sync=function(){try{var e=this;return this.subscription=this.subscription||(q||(q=new s.Client("https://rec.plugandwork.fr/faye")),q).subscribe("/users/all",function(t){"refresh_all_doc_thumb"===t.action&&t.did&&e.get(t.did,!1)&&e.get(t.did,!0)}),Promise.resolve(this.subscription)}catch(e){return Promise.reject(e)}},t.unsync=function(){try{return this.subscription?(this.subscription.cancel(),Promise.resolve()):Promise.resolve()}catch(e){return Promise.reject(e)}},t.prototype.download=function(){var e=document.createElement("a");e.style.display="none",document.body.appendChild(e),e.href=encodeURI("/documents/"+this.id+"/upload?mode=attachment"),e.setAttribute("download",this.title),e.click(),document.body.removeChild(e)},t}(k);F.apiType="docs",F.filters={id:"",created_at:"",updated_at:"",title:"",weight:""};var B=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);B.apiType="folders",B.d3Compatible=!1;var Y=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);Y.apiType="groups";var z=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t.prototype.addDocs=function(e){try{return Promise.resolve(v.post("/api/d1/spaces/"+this.id+"/add_docs",{doc_ids:e})).then(function(){})}catch(e){return Promise.reject(e)}},t}(k);z.apiType="spaces",z.filters={id:"",created_at:"",updated_at:"",title:"",weight:""};var W=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);W.apiType="users",W.d3Compatible=!1;var $=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);$.apiType="batchs";var J=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);J.apiType="datasets";var K=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(k);K.apiType="views",K.d3Compatible=!1;var G={__proto__:null,App:U,Bloc:L,Context:I,Doc:F,Folder:B,Group:Y,Space:z,User:W,Batch:$,Dataset:J,View:K},Q=function(){var e=document,t={};return e.cookie.split("; ").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t},X=function(){var e=Q();if(Object.keys(e).includes("paw_token"))return e.paw_token},Z=u.create("plugandwork-frontend",{fetchToken:function(){try{return Promise.resolve(X())}catch(e){return Promise.reject(e)}},fetchUser:function(){try{return Promise.resolve(h(function(){return Promise.resolve(v.get("/api/d2/users/me",{params:{full:!0}})).then(function(e){return new W(e.data.data)})},function(e){return console.log("Error while fetching user",e),null}))}catch(e){return Promise.reject(e)}}});function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ee(e,t)}var ne=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;function ie(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var ae=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=ie(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))re.call(n,a)&&(o[a]=n[a]);if(ne){r=ne(n);for(var c=0;c<r.length;c++)oe.call(n,r[c])&&(o[r[c]]=n[r[c]])}}return o},ce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",se=function(){};if("production"!==process.env.NODE_ENV){var ue=ce,pe={},le=Function.call.bind(Object.prototype.hasOwnProperty);se=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function fe(e,t,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(le(e,i)){var a;try{if("function"!=typeof e[i]){var c=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.");throw c.name="Invariant Violation",c}a=e[i](t,i,r,n,null,ue)}catch(e){a=e}if(!a||a instanceof Error||se((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in pe)){pe[a.message]=!0;var s=o?o():"";se("Failed "+n+" type: "+a.message+(null!=s?s:""))}}}fe.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(pe={})};var de=fe,he=Function.call.bind(Object.prototype.hasOwnProperty),ve=function(){};function ye(){return null}function me(){}function ge(){}"production"!==process.env.NODE_ENV&&(ve=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),ge.resetWarningCache=me;var be,Ee=(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,r={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:a(ye),arrayOf:function(e){return a(function(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var c=t[n];if(!Array.isArray(c))return new i("Invalid "+o+" `"+a+"` of type `"+u(c)+"` supplied to `"+r+"`, expected an array.");for(var s=0;s<c.length;s++){var p=e(c,s,r,o,a+"["+s+"]",ce);if(p instanceof Error)return p}return null})},element:a(function(t,n,r,o,a){var c=t[n];return e(c)?null:new i("Invalid "+o+" `"+a+"` of type `"+u(c)+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:a(function(e,t,n,r,o){var a=e[t];return l.isValidElementType(a)?null:new i("Invalid "+r+" `"+o+"` of type `"+u(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return a(function(t,n,r,o,a){var c;return t[n]instanceof e?null:new i("Invalid "+o+" `"+a+"` of type `"+((c=t[n]).constructor&&c.constructor.name?c.constructor.name:"<<anonymous>>")+"` supplied to `"+r+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:a(function(e,t,n,r,o){return s(e[t])?null:new i("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return a(function(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var c=t[n],s=u(c);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected an object.");for(var p in c)if(he(c,p)){var l=e(c,p,r,o,a+"."+p,ce);if(l instanceof Error)return l}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&ve(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),ye;function t(t,n,r,a,c){for(var s=t[n],u=0;u<e.length;u++)if(o(s,e[u]))return null;var l=JSON.stringify(e,function(e,t){return"symbol"===p(t)?String(t):t});return new i("Invalid "+a+" `"+c+"` of value `"+String(s)+"` supplied to `"+r+"`, expected one of "+l+".")}return a(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&ve("Invalid argument supplied to oneOfType, expected an instance of array."),ye;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return ve("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+f(n)+" at index "+t+"."),ye}return a(function(t,n,r,o,a){for(var c=0;c<e.length;c++)if(null==(0,e[c])(t,n,r,o,a,ce))return null;return new i("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")})},shape:function(e){return a(function(t,n,r,o,a){var c=t[n],s=u(c);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");for(var p in e){var l=e[p];if(l){var f=l(c,p,r,o,a+"."+p,ce);if(f)return f}}return null})},exact:function(e){return a(function(t,n,r,o,a){var c=t[n],s=u(c);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");var p=ae({},t[n],e);for(var l in p){var f=e[l];if(!f)return new i("Invalid "+o+" `"+a+"` key `"+l+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var d=f(c,l,r,o,a+"."+l,ce);if(d)return d}return null})}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function i(e){this.message=e,this.stack=""}function a(e){function t(t,n,r,o,a,c,s){if(o=o||"<<anonymous>>",c=c||r,s!==ce){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}return null==n[r]?t?new i(null===n[r]?"The "+a+" `"+c+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+a+" `"+c+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(n,r,o,a,c)}process;var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function c(e){return a(function(t,n,r,o,a,c){var s=t[n];return u(s)!==e?new i("Invalid "+o+" `"+a+"` of type `"+p(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null})}function s(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(s);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!s(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!s(a[1]))return!1}return!0;default:return!1}}function u(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function p(e){if(null==e)return""+e;var t=u(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function f(e){var t=p(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return i.prototype=Error.prototype,r.checkPropTypes=de,r.resetWarningCache=de.resetWarningCache,r.PropTypes=r,r}(l.isElement):function(){function e(e,t,n,r,o,i){if(i!==ce){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ge,resetWarningCache:me};return n.PropTypes=n,n}()}(be={exports:{}}),be.exports);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oe(e){return"/"===e.charAt(0)}function Pe(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}var _e="production"===process.env.NODE_ENV;function Ne(e,t){if(!_e){if(e)return;var n="Warning: "+t;"undefined"!=typeof console&&console.warn(n);try{throw Error(n)}catch(e){}}}var je="production"===process.env.NODE_ENV;function Te(e,t){if(!e){if(je)throw new Error("Invariant failed");throw new Error("Invariant failed: "+(t||""))}}function xe(e){return"/"===e.charAt(0)?e:"/"+e}function ke(e){return"/"===e.charAt(0)?e.substr(1):e}function Re(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function Se(e,t){return Re(e,t)?e.substr(t.length):e}function De(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Ae(e){var t=e.search,n=e.hash,r=e.pathname||"/";return t&&"?"!==t&&(r+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function Ce(e,t,n,r){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(o=we({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],i=e&&Oe(e),a=t&&Oe(t),c=i||a;if(e&&Oe(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var s=o[o.length-1];n="."===s||".."===s||""===s}else n=!1;for(var u=0,p=o.length;p>=0;p--){var l=o[p];"."===l?Pe(o,p):".."===l?(Pe(o,p),u++):u&&(Pe(o,p),u--)}if(!c)for(;u--;u)o.unshift("..");!c||""===o[0]||o[0]&&Oe(o[0])||o.unshift("");var f=o.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f}(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function Ve(){var e=null,t=[];return{setPrompt:function(t){return"production"!==process.env.NODE_ENV&&Ne(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,o){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof r?r(i,o):("production"!==process.env.NODE_ENV&&Ne(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==i)}else o(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}var Ue=!("undefined"==typeof window||!window.document||!window.document.createElement);function Le(e,t){t(window.confirm(e))}function Ie(){try{return window.history.state||{}}catch(e){return{}}}function qe(e){void 0===e&&(e={}),Ue||("production"!==process.env.NODE_ENV?Te(!1,"Browser history needs a DOM"):Te(!1));var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e.forceRefresh,a=void 0!==i&&i,c=e.getUserConfirmation,s=void 0===c?Le:c,u=e.keyLength,p=void 0===u?6:u,l=e.basename?De(xe(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,o=window.location,i=o.pathname+o.search+o.hash;return"production"!==process.env.NODE_ENV&&Ne(!l||Re(i,l),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+l+'".'),l&&(i=Se(i,l)),Ce(i,r,n)}function d(){return Math.random().toString(36).substr(2,p)}var h=Ve();function v(e){we(T,e),T.length=n.length,h.notifyListeners(T.location,T.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(f(e.state))}function m(){b(f(Ie()))}var g=!1;function b(e){g?(g=!1,v()):h.confirmTransitionTo(e,"POP",s,function(t){t?v({action:"POP",location:e}):function(e){var t=w.indexOf(T.location.key);-1===t&&(t=0);var n=w.indexOf(e.key);-1===n&&(n=0);var r=t-n;r&&(g=!0,P(r))}(e)})}var E=f(Ie()),w=[E.key];function O(e){return l+Ae(e)}function P(e){n.go(e)}var _=0;function N(e){1===(_+=e)&&1===e?(window.addEventListener("popstate",y),o&&window.addEventListener("hashchange",m)):0===_&&(window.removeEventListener("popstate",y),o&&window.removeEventListener("hashchange",m))}var j=!1,T={length:n.length,action:"POP",location:E,createHref:O,push:function(e,t){"production"!==process.env.NODE_ENV&&Ne(!("object"==typeof e&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=Ce(e,t,d(),T.location);h.confirmTransitionTo(o,"PUSH",s,function(e){if(e){var t=O(o),i=o.state;if(r)if(n.pushState({key:o.key,state:i},null,t),a)window.location.href=t;else{var c=w.indexOf(T.location.key),s=w.slice(0,c+1);s.push(o.key),w=s,v({action:"PUSH",location:o})}else"production"!==process.env.NODE_ENV&&Ne(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function(e,t){"production"!==process.env.NODE_ENV&&Ne(!("object"==typeof e&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=Ce(e,t,d(),T.location);h.confirmTransitionTo(o,"REPLACE",s,function(e){if(e){var t=O(o),i=o.state;if(r)if(n.replaceState({key:o.key,state:i},null,t),a)window.location.replace(t);else{var c=w.indexOf(T.location.key);-1!==c&&(w[c]=o.key),v({action:"REPLACE",location:o})}else"production"!==process.env.NODE_ENV&&Ne(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:P,goBack:function(){P(-1)},goForward:function(){P(1)},block:function(e){void 0===e&&(e=!1);var t=h.setPrompt(e);return j||(N(1),j=!0),function(){return j&&(j=!1,N(-1)),t()}},listen:function(e){var t=h.appendListener(e);return N(1),function(){N(-1),t()}}};return T}var Me={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+ke(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:ke,decodePath:xe},slash:{encodePath:xe,decodePath:xe}};function He(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Fe(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Be(e){window.location.replace(He(window.location.href)+"#"+e)}function Ye(e){void 0===e&&(e={}),Ue||("production"!==process.env.NODE_ENV?Te(!1,"Hash history needs a DOM"):Te(!1));var t=window.history,n=-1===window.navigator.userAgent.indexOf("Firefox"),r=e.getUserConfirmation,o=void 0===r?Le:r,i=e.hashType,a=void 0===i?"slash":i,c=e.basename?De(xe(e.basename)):"",s=Me[a],u=s.encodePath,p=s.decodePath;function l(){var e=p(Fe());return"production"!==process.env.NODE_ENV&&Ne(!c||Re(e,c),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+c+'".'),c&&(e=Se(e,c)),Ce(e)}var f=Ve();function d(e){we(N,e),N.length=t.length,f.notifyListeners(N.location,N.action)}var h=!1,v=null;function y(){var e,t,n=Fe(),r=u(n);if(n!==r)Be(r);else{var i=l();if(!h&&(e=N.location).pathname===(t=i).pathname&&e.search===t.search&&e.hash===t.hash)return;if(v===Ae(i))return;v=null,function(e){h?(h=!1,d()):f.confirmTransitionTo(e,"POP",o,function(t){t?d({action:"POP",location:e}):function(e){var t=E.lastIndexOf(Ae(N.location));-1===t&&(t=0);var n=E.lastIndexOf(Ae(e));-1===n&&(n=0);var r=t-n;r&&(h=!0,w(r))}(e)})}(i)}}var m=Fe(),g=u(m);m!==g&&Be(g);var b=l(),E=[Ae(b)];function w(e){"production"!==process.env.NODE_ENV&&Ne(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)}var O=0;function P(e){1===(O+=e)&&1===e?window.addEventListener("hashchange",y):0===O&&window.removeEventListener("hashchange",y)}var _=!1,N={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=He(window.location.href)),n+"#"+u(c+Ae(e))},push:function(e,t){"production"!==process.env.NODE_ENV&&Ne(void 0===t,"Hash history cannot push state; it is ignored");var n=Ce(e,void 0,void 0,N.location);f.confirmTransitionTo(n,"PUSH",o,function(e){if(e){var t=Ae(n),r=u(c+t);if(Fe()!==r){v=t,function(e){window.location.hash=e}(r);var o=E.lastIndexOf(Ae(N.location)),i=E.slice(0,o+1);i.push(t),E=i,d({action:"PUSH",location:n})}else"production"!==process.env.NODE_ENV&&Ne(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),d()}})},replace:function(e,t){"production"!==process.env.NODE_ENV&&Ne(void 0===t,"Hash history cannot replace state; it is ignored");var n=Ce(e,void 0,void 0,N.location);f.confirmTransitionTo(n,"REPLACE",o,function(e){if(e){var t=Ae(n),r=u(c+t);Fe()!==r&&(v=t,Be(r));var o=E.indexOf(Ae(N.location));-1!==o&&(E[o]=t),d({action:"REPLACE",location:n})}})},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return _||(P(1),_=!0),function(){return _&&(_=!1,P(-1)),t()}},listen:function(e){var t=f.appendListener(e);return P(1),function(){P(-1),t()}}};return N}function ze(e,t,n){return Math.min(Math.max(e,t),n)}function We(e){void 0===e&&(e={});var t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,o=e.initialIndex,i=void 0===o?0:o,a=e.keyLength,c=void 0===a?6:a,s=Ve();function u(e){we(h,e),h.length=h.entries.length,s.notifyListeners(h.location,h.action)}function p(){return Math.random().toString(36).substr(2,c)}var l=ze(i,0,r.length-1),f=r.map(function(e){return Ce(e,void 0,"string"==typeof e?p():e.key||p())});function d(e){var n=ze(h.index+e,0,h.entries.length-1),r=h.entries[n];s.confirmTransitionTo(r,"POP",t,function(e){e?u({action:"POP",location:r,index:n}):u()})}var h={length:f.length,action:"POP",location:f[l],index:l,entries:f,createHref:Ae,push:function(e,n){"production"!==process.env.NODE_ENV&&Ne(!("object"==typeof e&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=Ce(e,n,p(),h.location);s.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=h.index+1,n=h.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),u({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,n){"production"!==process.env.NODE_ENV&&Ne(!("object"==typeof e&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=Ce(e,n,p(),h.location);s.confirmTransitionTo(r,"REPLACE",t,function(e){e&&(h.entries[h.index]=r,u({action:"REPLACE",location:r}))})},go:d,goBack:function(){d(-1)},goForward:function(){d(1)},canGo:function(e){var t=h.index+e;return t>=0&&t<h.entries.length},block:function(e){return void 0===e&&(e=!1),s.setPrompt(e)},listen:function(e){return s.appendListener(e)}};return h}var $e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function Je(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}var Ke=a.createContext||function(e,t){var n,r,o="__create-react-context-"+function(){var e="__global_unique_id__";return $e[e]=($e[e]||0)+1}()+"__",a=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=Je(t.props.value),t}te(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,o=e.value;((i=r)===(a=o)?0!==i||1/i==1/a:i!=i&&a!=a)?n=0:(n="function"==typeof t?t(r,o):1073741823,"production"!==process.env.NODE_ENV&&Ne((1073741823&n)===n,"calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: "+n),0!=(n|=0)&&this.emitter.set(e.value,n))}var i,a},r.render=function(){return this.props.children},n}(i.Component);a.childContextTypes=((n={})[o]=Ee.object.isRequired,n);var c=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}te(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?1073741823:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?1073741823:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return c.contextTypes=((r={})[o]=Ee.object,r),{Provider:a,Consumer:c}},Ge=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Qe=function e(t,n,r){return Ge(n)||(r=n||r,n=[]),r=r||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ct(e,t)}(t,n):Ge(t)?function(t,n,r){for(var o=[],i=0;i<t.length;i++)o.push(e(t[i],n,r).source);return ct(new RegExp("(?:"+o.join("|")+")",st(r)),n)}(t,n,r):function(e,t,n){return ut(nt(e,n),t,n)}(t,n,r)},Xe=nt,Ze=ot,et=ut,tt=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function nt(e,t){for(var n,r=[],o=0,i=0,a="",c=t&&t.delimiter||"/";null!=(n=tt.exec(e));){var s=n[0],u=n[1],p=n.index;if(a+=e.slice(i,p),i=p+s.length,u)a+=u[1];else{var l=e[i],f=n[2],d=n[3],h=n[4],v=n[5],y=n[6],m=n[7];a&&(r.push(a),a="");var g=n[2]||c,b=h||v;r.push({name:d||o++,prefix:f||"",delimiter:g,optional:"?"===y||"*"===y,repeat:"+"===y||"*"===y,partial:null!=f&&null!=l&&l!==f,asterisk:!!m,pattern:b?at(b):m?".*":"[^"+it(g)+"]+?"})}}return i<e.length&&(a+=e.substr(i)),a&&r.push(a),r}function rt(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function ot(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",st(t)));return function(t,r){for(var o="",i=t||{},a=(r||{}).pretty?rt:encodeURIComponent,c=0;c<e.length;c++){var s=e[c];if("string"!=typeof s){var u,p=i[s.name];if(null==p){if(s.optional){s.partial&&(o+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be defined')}if(Ge(p)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<p.length;l++){if(u=a(p[l]),!n[c].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received `'+JSON.stringify(u)+"`");o+=(0===l?s.prefix:s.delimiter)+u}}else{if(u=s.asterisk?encodeURI(p).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):a(p),!n[c].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+u+'"');o+=s.prefix+u}}else o+=s}return o}}function it(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function at(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function ct(e,t){return e.keys=t,e}function st(e){return e&&e.sensitive?"":"i"}function ut(e,t,n){Ge(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,i="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)i+=it(c);else{var s=it(c.prefix),u="(?:"+c.pattern+")";t.push(c),c.repeat&&(u+="(?:"+s+u+")*"),i+=u=c.optional?c.partial?s+"("+u+")?":"(?:"+s+"("+u+"))?":s+"("+u+")"}}var p=it(n.delimiter||"/"),l=i.slice(-p.length)===p;return r||(i=(l?i.slice(0,-p.length):i)+"(?:"+p+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+p+"|$)",ct(new RegExp("^"+i,st(n)),t)}function pt(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}Qe.parse=Xe,Qe.compile=function(e,t){return ot(nt(e,t),t)},Qe.tokensToFunction=Ze,Qe.tokensToRegExp=et;var lt=function(e){var t=Ke();return t.displayName="Router-History",t}(),ft=function(e){var t=Ke();return t.displayName="Router",t}(),dt=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e})),n}te(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.createElement(ft.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.createElement(lt.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.Component);"production"!==process.env.NODE_ENV&&(dt.propTypes={children:Ee.node,history:Ee.object.isRequired,staticContext:Ee.object},dt.prototype.componentDidUpdate=function(e){"production"!==process.env.NODE_ENV&&Ne(e.history===this.props.history,"You cannot change <Router history>")});var ht=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=We(t.props),t}return te(t,e),t.prototype.render=function(){return a.createElement(dt,{history:this.history,children:this.props.children})},t}(a.Component);"production"!==process.env.NODE_ENV&&(ht.propTypes={initialEntries:Ee.array,initialIndex:Ee.number,getUserConfirmation:Ee.func,keyLength:Ee.number,children:Ee.node},ht.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Ne(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")}),"production"!==process.env.NODE_ENV&&Ee.oneOfType([Ee.func,Ee.string]),"production"!==process.env.NODE_ENV&&Ee.oneOfType([Ee.string,Ee.object]);var vt={},yt=0;function mt(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t.exact,r=void 0!==n&&n,o=t.strict,i=void 0!==o&&o,a=t.sensitive,c=void 0!==a&&a;return[].concat(t.path).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var o=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=vt[n]||(vt[n]={});if(r[e])return r[e];var o=[],i={regexp:Qe(e,o,t),keys:o};return yt<1e4&&(r[e]=i,yt++),i}(n,{end:r,strict:i,sensitive:c}),a=o.keys,s=o.regexp.exec(e);if(!s)return null;var u=s[0],p=s.slice(1),l=e===u;return r&&!l?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:l,params:a.reduce(function(e,t,n){return e[t.name]=p[n],e},{})}},null)}function gt(e){return 0===a.Children.count(e)}function bt(e,t,n){var r=e(t);return"production"!==process.env.NODE_ENV&&Ne(void 0!==r,"You returned `undefined` from the `children` function of <Route"+(n?' path="'+n+'"':"")+">, but you should have returned a React element or `null`"),r||null}var Et=function(e){function t(){return e.apply(this,arguments)||this}return te(t,e),t.prototype.render=function(){var e=this;return a.createElement(ft.Consumer,null,function(t){t||("production"!==process.env.NODE_ENV?Te(!1,"You should not use <Route> outside a <Router>"):Te(!1));var n=e.props.location||t.location,r=we({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?mt(n.pathname,e.props):t.match}),o=e.props,i=o.children,c=o.component,s=o.render;return Array.isArray(i)&&0===i.length&&(i=null),a.createElement(ft.Provider,{value:r},r.match?i?"function"==typeof i?"production"!==process.env.NODE_ENV?bt(i,r,e.props.path):i(r):i:c?a.createElement(c,r):s?s(r):null:"function"==typeof i?"production"!==process.env.NODE_ENV?bt(i,r,e.props.path):i(r):null)})},t}(a.Component);function wt(e){return"/"===e.charAt(0)?e:"/"+e}function Ot(e,t){if(!e)return t;var n=wt(e);return 0!==t.pathname.indexOf(n)?t:we({},t,{pathname:t.pathname.substr(n.length)})}function Pt(e){return"string"==typeof e?e:Ae(e)}function _t(e){return function(){"production"!==process.env.NODE_ENV?Te(!1,"You cannot %s with <StaticRouter>"):Te(!1)}}function Nt(){}"production"!==process.env.NODE_ENV&&(Et.propTypes={children:Ee.oneOfType([Ee.func,Ee.node]),component:function(e,t){if(e[t]&&!p.isValidElementType(e[t]))return new Error("Invalid prop 'component' supplied to 'Route': the prop is not a valid React component")},exact:Ee.bool,location:Ee.object,path:Ee.oneOfType([Ee.string,Ee.arrayOf(Ee.string)]),render:Ee.func,sensitive:Ee.bool,strict:Ee.bool},Et.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Ne(!(this.props.children&&!gt(this.props.children)&&this.props.component),"You should not use <Route component> and <Route children> in the same route; <Route component> will be ignored"),"production"!==process.env.NODE_ENV&&Ne(!(this.props.children&&!gt(this.props.children)&&this.props.render),"You should not use <Route render> and <Route children> in the same route; <Route render> will be ignored"),"production"!==process.env.NODE_ENV&&Ne(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored")},Et.prototype.componentDidUpdate=function(e){"production"!==process.env.NODE_ENV&&Ne(!(this.props.location&&!e.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),"production"!==process.env.NODE_ENV&&Ne(!(!this.props.location&&e.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')});var jt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return Nt},t.handleBlock=function(){return Nt},t}te(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,o=void 0===r?"":r,i=n.context,a=void 0===i?{}:i;a.action=t,a.location=function(e,t){return e?we({},t,{pathname:wt(e)+t.pathname}):t}(o,Ce(e)),a.url=Pt(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,i=e.location,c=void 0===i?"/":i,s=pt(e,["basename","context","location"]),u={createHref:function(e){return wt(n+Pt(e))},action:"POP",location:Ot(n,Ce(c)),push:this.handlePush,replace:this.handleReplace,go:_t(),goBack:_t(),goForward:_t(),listen:this.handleListen,block:this.handleBlock};return a.createElement(dt,we({},s,{history:u,staticContext:o}))},t}(a.Component);"production"!==process.env.NODE_ENV&&(jt.propTypes={basename:Ee.string,context:Ee.object,location:Ee.oneOfType([Ee.string,Ee.object])},jt.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Ne(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")});var Tt=function(e){function t(){return e.apply(this,arguments)||this}return te(t,e),t.prototype.render=function(){var e=this;return a.createElement(ft.Consumer,null,function(t){t||("production"!==process.env.NODE_ENV?Te(!1,"You should not use <Switch> outside a <Router>"):Te(!1));var n,r,o=e.props.location||t.location;return a.Children.forEach(e.props.children,function(e){if(null==r&&a.isValidElement(e)){n=e;var i=e.props.path||e.props.from;r=i?mt(o.pathname,we({},e.props,{path:i})):t.match}}),r?a.cloneElement(n,{location:o,computedMatch:r}):null})},t}(a.Component);if("production"!==process.env.NODE_ENV&&(Tt.propTypes={children:Ee.node,location:Ee.object},Tt.prototype.componentDidUpdate=function(e){"production"!==process.env.NODE_ENV&&Ne(!(this.props.location&&!e.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),"production"!==process.env.NODE_ENV&&Ne(!(!this.props.location&&e.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')}),"production"!==process.env.NODE_ENV&&"undefined"!=typeof window){var xt=window,kt="__react_router_build__",Rt={cjs:"CommonJS",esm:"ES modules",umd:"UMD"};if(xt[kt]&&"esm"!==xt[kt])throw new Error("You are loading the "+Rt.esm+" build of React Router on a page that is already running the "+Rt[xt[kt]]+" build, so things won't work right.");xt[kt]="esm"}var St=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=qe(t.props),t}return te(t,e),t.prototype.render=function(){return a.createElement(dt,{history:this.history,children:this.props.children})},t}(a.Component);"production"!==process.env.NODE_ENV&&(St.propTypes={basename:Ee.string,children:Ee.node,forceRefresh:Ee.bool,getUserConfirmation:Ee.func,keyLength:Ee.number},St.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Ne(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")});var Dt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=Ye(t.props),t}return te(t,e),t.prototype.render=function(){return a.createElement(dt,{history:this.history,children:this.props.children})},t}(a.Component);"production"!==process.env.NODE_ENV&&(Dt.propTypes={basename:Ee.string,children:Ee.node,getUserConfirmation:Ee.func,hashType:Ee.oneOf(["hashbang","noslash","slash"])},Dt.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Ne(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")});var At=function(e,t){return"function"==typeof e?e(t):e},Ct=function(e,t){return"string"==typeof e?Ce(e,null,null,t):e},Vt=function(e){return e},Ut=a.forwardRef;void 0===Ut&&(Ut=Vt);var Lt=Ut(function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,i=pt(e,["innerRef","navigate","onClick"]),c=i.target,s=we({},i,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return s.ref=Vt!==Ut&&t||n,a.createElement("a",s)});"production"!==process.env.NODE_ENV&&(Lt.displayName="LinkAnchor");var It=Ut(function(e,t){var n=e.component,r=void 0===n?Lt:n,o=e.replace,i=e.to,c=e.innerRef,s=pt(e,["component","replace","to","innerRef"]);return a.createElement(ft.Consumer,null,function(e){e||("production"!==process.env.NODE_ENV?Te(!1,"You should not use <Link> outside a <Router>"):Te(!1));var n=e.history,u=Ct(At(i,e.location),e.location),p=u?n.createHref(u):"",l=we({},s,{href:p,navigate:function(){var t=At(i,e.location);(o?n.replace:n.push)(t)}});return Vt!==Ut?l.ref=t||c:l.innerRef=c,a.createElement(r,l)})});if("production"!==process.env.NODE_ENV){var qt=Ee.oneOfType([Ee.string,Ee.object,Ee.func]),Mt=Ee.oneOfType([Ee.string,Ee.func,Ee.shape({current:Ee.any})]);It.displayName="Link",It.propTypes={innerRef:Mt,onClick:Ee.func,replace:Ee.bool,target:Ee.string,to:qt.isRequired}}var Ht=function(e){return e},Ft=a.forwardRef;void 0===Ft&&(Ft=Ht);var Bt=Ft(function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,i=void 0===o?"active":o,c=e.activeStyle,s=e.className,u=e.exact,p=e.isActive,l=e.location,f=e.sensitive,d=e.strict,h=e.style,v=e.to,y=e.innerRef,m=pt(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(ft.Consumer,null,function(e){e||("production"!==process.env.NODE_ENV?Te(!1,"You should not use <NavLink> outside a <Router>"):Te(!1));var n=l||e.location,o=Ct(At(v,n),n),g=o.pathname,b=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=b?mt(n.pathname,{path:b,exact:u,sensitive:f,strict:d}):null,w=!!(p?p(E,n):E),O=w?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(s,i):s,P=w?we({},h,{},c):h,_=we({"aria-current":w&&r||null,className:O,style:P,to:o},m);return Ht!==Ft?_.ref=t||y:_.innerRef=y,a.createElement(It,_)})});if("production"!==process.env.NODE_ENV){Bt.displayName="NavLink";var Yt=Ee.oneOf(["page","step","location","date","time","true"]);Bt.propTypes=we({},It.propTypes,{"aria-current":Yt,activeClassName:Ee.string,activeStyle:Ee.object,className:Ee.string,exact:Ee.bool,isActive:Ee.func,location:Ee.object,sensitive:Ee.bool,strict:Ee.bool,style:Ee.object})}var zt=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.render=function(){var e,t=this.props.app,n=t.component,r=t.publicComponent,o=r&&(e=r,function(t){function n(e){var n;return(n=t.call(this,e)||this).handleSubmit=function(e){try{e.preventDefault();var t=n.state,r=t.username,o=t.password,i=h(function(){return Promise.resolve(v.post("/api/pin_token?username="+r+"&password="+o)).then(function(e){var t=e.data,r=t.access_token;v.interceptors.request.use(function(e){return Z.getToken()&&(e.headers.Authorization="Bearer "+r),e},function(e){return Promise.reject(e)}),n.setState({contact:t.id,ready:!0})})},function(){alert("Une erreur est survenue, vérifiez que les identifiants sont corrects")});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},n.state={contact:null,ready:!1,username:"",password:""},n}d(n,t);var r=n.prototype;return r.componentDidMount=function(){try{var e=this;return U.apiType="contacts/apps",F.apiType="contacts/docs",z.apiType="contacts/spaces",Promise.resolve(h(function(){var t=e.props.match.params.contactToken,n=function(){if(t)return Promise.resolve(v.post("/api/pin_token?token="+t)).then(function(t){var n=t.data,r=n.access_token;v.interceptors.request.use(function(e){return Z.getToken()&&(e.headers.Authorization="Bearer "+r),e},function(e){return Promise.reject(e)}),e.setState({contact:n.id,ready:!0})})}();if(n&&n.then)return n.then(function(){})},function(e){console.error(e)}))}catch(e){return Promise.reject(e)}},r.render=function(){var t=this;return this.state.ready?a.createElement(e,f({},this.props,{contact:this.state.contact})):a.createElement("div",null,a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",null,a.createElement("label",null,"Email"),a.createElement("input",{value:this.state.username,onChange:function(e){return t.setState({username:e.currentTarget.value})},type:"email"})),a.createElement("div",null,a.createElement("label",null,"Mot de passe"),a.createElement("input",{value:this.state.password,onChange:function(e){return t.setState({password:e.currentTarget.value})},type:"password"})),a.createElement("input",{type:"submit"})))},n}(a.Component)),i=n&&function(e){return function(t){function n(e){var n;return(n=t.call(this,e)||this).state={ready:!1},n}d(n,t);var r=n.prototype;return r.componentDidMount=function(){try{var e=this,t=function(){if(Z.user)e.setState({ready:!0});else if("production"!==process.env.NODE_ENV){var t=prompt("Entrez votre token de connexion");localStorage.setItem("paw_token",t),window.location.reload()}else{var n=process.env.REACT_APP_PAW_HOST||"";window.location.href=n+"/users/sign_in?identity_provider=paw-front&callback_url="+window.location.origin}};U.apiType="apps",F.apiType="docs",z.apiType="spaces";var n=h(function(){var e=X()||localStorage.getItem("paw_token");return e&&Z.setToken(e),v.interceptors.request.use(function(e){var t=Z.getToken();return t&&(e.headers.Authorization="Bearer "+t),e},function(e){return Promise.reject(e)}),Promise.resolve(Z.sync()).then(function(){})},function(e){console.error(e)});return Promise.resolve(n&&n.then?n.then(t):t())}catch(e){return Promise.reject(e)}},r.render=function(){return this.state.ready?a.createElement(e,this.props):null},n}(a.Component)}(n);return a.createElement(St,{basename:this.props.basename},a.createElement(Tt,null,a.createElement(Et,{component:o,path:"/public/:contactToken?"}),a.createElement(Et,{component:i})))},t}(a.Component),Wt={__proto__:null,authmanager:Z,axios:v,logout:function(){try{return v.post("/api/logout").then(function(){return Z.logout()}).catch(function(e){console.error("Error during logout request",e)}),Promise.resolve()}catch(e){return Promise.reject(e)}},getTokenFromCookie:X,setTokenFromCookie:function(){var e=Q();Object.keys(e).includes("paw_token")?localStorage.setItem("paw_token",e.paw_token):localStorage.removeItem("paw_token")},ReactEntry:zt};exports.default={lib:V,models:G,utils:Wt},exports.lib=V,exports.models=G,exports.utils=Wt;
//# sourceMappingURL=index.js.map
