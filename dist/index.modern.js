import t from"axios";import e from"lodash";import{composeWithDevTools as n}from"redux-devtools-extension";import{createStore as r,applyMiddleware as o}from"@reduxjs/toolkit";import i,{Component as a}from"react";import c from"bson-objectid";import s from"faye";import u from"rxjs-auth";import p,{isValidElementType as l}from"react-is";function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var v=t.create({baseURL:process.env.REACT_APP_PAW_HOST||""}),y=Object.prototype.hasOwnProperty,m=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),g=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n},b={arrayToObject:g,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var s=a[c],u=i[s];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(e.push({obj:i,prop:s}),n.push(u))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)void 0!==e[o]&&r.push(e[o]);n.obj[n.prop]=r}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=e.charAt(r):o<128?n+=m[o]:o<2048?n+=m[192|o>>6]+m[128|63&o]:o<55296||o>=57344?n+=m[224|o>>12]+m[128|o>>6&63]+m[128|63&o]:(o=65536+((1023&o)<<10|1023&e.charCodeAt(r+=1)),n+=m[240|o>>18]+m[128|o>>12&63]+m[128|o>>6&63]+m[128|63&o])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,r){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(r.plainObjects||r.allowPrototypes||!y.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var o=e;return Array.isArray(e)&&!Array.isArray(n)&&(o=g(e,r)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,o){y.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t(e[o],n,r):e.push(n):e[o]=n}),e):Object.keys(n).reduce(function(e,o){var i=n[o];return e[o]=y.call(e,o)?t(e[o],i,r):i,e},o)}},E=String.prototype.replace,w=/%20/g,O={default:"RFC3986",formatters:{RFC1738:function(t){return E.call(t,w,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"},P={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},_=Date.prototype.toISOString,N={delimiter:"&",encode:!0,encoder:b.encode,encodeValuesOnly:!1,serializeDate:function(t){return _.call(t)},skipNulls:!1,strictNullHandling:!1},j=function t(e,n,r,o,i,a,c,s,u,p,l,f){var d=e;if("function"==typeof c)d=c(n,d);else if(d instanceof Date)d=p(d);else if(null===d){if(o)return a&&!f?a(n,N.encoder):n;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||b.isBuffer(d))return a?[l(f?n:a(n,N.encoder))+"="+l(a(d,N.encoder))]:[l(n)+"="+l(String(d))];var h,v=[];if(void 0===d)return v;if(Array.isArray(c))h=c;else{var y=Object.keys(d);h=s?y.sort(s):y}for(var m=0;m<h.length;++m){var g=h[m];i&&null===d[g]||(v=Array.isArray(d)?v.concat(t(d[g],r(n,g),r,o,i,a,c,s,u,p,l,f)):v.concat(t(d[g],n+(u?"."+g:"["+g+"]"),r,o,i,a,c,s,u,p,l,f)))}return v},T=function(t,e){var n=t,r=e?b.assign({},e):{};if(null!=r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===r.delimiter?N.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:N.strictNullHandling,a="boolean"==typeof r.skipNulls?r.skipNulls:N.skipNulls,c="boolean"==typeof r.encode?r.encode:N.encode,s="function"==typeof r.encoder?r.encoder:N.encoder,u="function"==typeof r.sort?r.sort:null,p=void 0!==r.allowDots&&r.allowDots,l="function"==typeof r.serializeDate?r.serializeDate:N.serializeDate,f="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:N.encodeValuesOnly;if(void 0===r.format)r.format=O.default;else if(!Object.prototype.hasOwnProperty.call(O.formatters,r.format))throw new TypeError("Unknown format option provided.");var d,h,v=O.formatters[r.format];"function"==typeof r.filter?n=(h=r.filter)("",n):Array.isArray(r.filter)&&(d=h=r.filter);var y=[];if("object"!=typeof n||null===n)return"";var m=P[r.arrayFormat in P?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices"];d||(d=Object.keys(n)),u&&d.sort(u);for(var g=0;g<d.length;++g){var E=d[g];a&&null===n[E]||(y=y.concat(j(n[E],E,m,i,a,c?s:null,h,u,p,l,v,f)))}var w=y.join(o);return w.length>0?(!0===r.addQueryPrefix?"?":"")+w:""},x=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(o=r;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(i=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var a=i[o];if(!("_owner"===a&&e.$$typeof||t(e[a],n[a])))return!1}return!0}return e!=e&&n!=n},k=function(){function t(t){var n=this;return void 0===t&&(t={}),this.relationships=[],this.__populated=!1,this.id=t.id||(new c).toString(),this.attributes=t.attributes||{},new Proxy(this,{get:function(r,o){r=n;var i=function(t){return"string"==typeof t&&Reflect.ownKeys(r.relationships).includes(t)?e.get(r.relationships,t):void 0!==e.get(r.attributes,t)?e.get(r.attributes,t):e.get(r,t)};switch(o){case"constructor":return r.constructor;case"attributes":return r.attributes;case"relationships":return t.relationships;case"_raw":return t;case"id":return r.id;case"get":return i}return i(o)}})}t.clearCache=function(){delete this._cache},t.create=function(t,e){void 0===e&&(e=!1);try{var n=this;return Promise.resolve(h(function(){return Promise.resolve(v.post("/api/d2/"+n.apiType,{data:{attributes:t}})).then(function(t){var e=t.data.data,r=new n(e);return n.clearCache(),n.store.dispatch({type:"UPSERT",payload:e}),r})},function(t){if(e)return alert("Une erreur est survenue, impossible de créer cet élément"),void console.error(t);throw t}))}catch(t){return Promise.reject(t)}},t.get=function(t,e){var n=this,r=!e&&this.list.find(function(e){return e.id===t});return r||!1===e?r:new Promise(function(e,r){try{var o=h(function(){return Promise.resolve(n.fetch(t,{count:!1})).then(function(t){e(n.get(t.id,!1))})},function(t){r(t)});return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(t){return Promise.reject(t)}})},t.fetch=function(t,e){var n=e.count,r=void 0===n||n,o=e.refresh,i=void 0!==o&&o,a=e.forceD2,c=void 0!==a&&a;try{var s=this,u=JSON.stringify({query:t,count:r});return Promise.resolve(s.cache[u]&&!i?s.cache[u]:h(function(){var e={method:"GET"};if("string"==typeof t)e.url="/api/d2/"+s.apiType+"/"+t;else if(!c&&s.d3Compatible&&(t.search||t.title))e.method="POST",e.url="/api/d3/search/"+s.apiType,e.data=t;else{var n=T(t,{arrayFormat:"brackets"});e.url="/api/d2/"+s.apiType+"?"+n}return Promise.resolve(v(e)).then(function(t){var e=t.data,n=s.setDatas(e);return s.cache[u]=r?{count:e.meta.pagination.total_objects,data:n}:n,s.cache[u]})},function(){return[]}))}catch(t){return Promise.reject(t)}},t.bulkUpdate=function(t,e,n){try{var r,o=this,i=function(){var t=r.map(function(t){return{method:"PATCH",url:n+"/"+t,body:{data:{attributes:e}}}});return Promise.resolve(v.post("/api/d2/batch_sequential",{requests:t})).then(function(){})};n=n||"/api/d2/"+o.apiType;var a=function(){if(!Array.isArray(t))return Promise.resolve(o.fetch(t)).then(function(t){r=t.data.map(function(t){return t.id})})}();return Promise.resolve(a&&a.then?a.then(i):i())}catch(t){return Promise.reject(t)}},t.setDatas=function(t,e){var n=this;void 0===e&&(e=!0);try{var r=t.data;return e&&this.store.dispatch({type:"UPSERT",payload:r}),Array.isArray(r)?r.map(function(t){return n.list.find(function(e){return e.id===t.id})||new n(t)}):this.list.find(function(t){return t.id===r.id})||new this(r)}catch(t){return[]}};var a,s=t.prototype;return s.populate=function(){try{var t=this;if(t.__populated)return Promise.resolve();var e=h(function(){var e=Object.getPrototypeOf(t).constructor.apiType;return Promise.resolve(v.get("/api/d2/"+e+"/"+t.id)).then(function(e){Object.assign(t,e.data.data),t.__populated=!0})},function(t){alert("Une erreur est survenue, impossible de peupler cet élément"),console.error(t)});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},s.update=function(t){try{var e=this,n=Object.getPrototypeOf(e).constructor,r=h(function(){return Promise.resolve(v.patch("/api/d2/"+n.apiType+"/"+e.id,{data:{attributes:t}})).then(function(t){n.store.dispatch({type:"UPDATE",payload:t.data.data}),n.clearCache()})},function(t){alert("Une erreur est survenue, impossible de mettre à jour cet élément"),console.error(t)});return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},s.delete=function(t){void 0===t&&(t=!1);try{var e=this;if(!t&&!window.confirm("Voulez-vous vraiment supprimer cet élément ?"))return Promise.resolve();var n=Object.getPrototypeOf(e).constructor,r=h(function(){return Promise.resolve(v.delete("/api/d2/"+n.apiType+"/"+e.id)).then(function(){n.store.dispatch({type:"DELETE",payload:e}),n.clearCache()})},function(e){t||alert("Une erreur est survenue, impossible de supprimer cet élément"),console.error(e)});return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},t.connect=function(t,e){return void 0===e&&(e={}),function(t,e,n){return function(r){return function(o){function a(e){var r;(r=o.call(this,e)||this).configure=function(t,e){var n=t.query,o=t.page,i=t.pageSize,a=t.sort;void 0===e&&(e=!1);try{var c={};return void 0===n||!e&&x(n,r.state.query)||(c.query=n),void 0===o||!e&&x(o,r.state.page)||(c.page=o),void 0===i||!e&&x(i,r.state.pageSize)||(c.pageSize=i),void 0===a||!e&&x(a,r.state.sort)||(c.sort=a),Object.keys(c).forEach(function(t){null===c[t]&&(c[t]=void 0)}),r.setState(c),Promise.resolve()}catch(t){return Promise.reject(t)}},r.fetchData=function(e,n){return void 0===e&&(e=r.state.query),void 0===n&&(n=!1),r.setState({loading:!0}),new Promise(function(o){try{var i,a=function(){r.setState({ids:c,count:i,loading:!1},o)},c=[],s=function(){if(e&&"object"==typeof e){var o=r.state,a=Object.assign({},e,{page:o.page,per_page:o.pageSize,sort:o.sort});return Promise.resolve(t.fetch(a,{refresh:n})).then(function(t){var e;i=t.count,c=(null===(e=t.data)||void 0===e?void 0:e.map(function(t){return t.id}))||[]})}var s=function(){if("string"==typeof e)return Promise.resolve(t.get(e,!0)).then(function(t){c=t?[t.id]:[]})}();if(s&&s.then)return s.then(function(){})}();return Promise.resolve(s&&s.then?s.then(a):a())}catch(t){return Promise.reject(t)}})},r.handleNextPage=function(){r.configure({page:r.state.page+1})},r.handlePrevPage=function(){r.state.page<=1||r.configure({page:r.state.page-1})},r.handleRefresh=function(){r.fetchData(r.state.query,!0)};var i={query:{},loading:!1,ids:[],count:void 0,pageSize:10,page:1,sort:void 0};return r.state=n.init&&"object"==typeof n.init?Object.assign({},i,n.init):i,r.prevLength=t.list.length,r}d(a,o);var c=a.prototype;return c.componentDidMount=function(){var e=this;this.unsubscribe=t.store.subscribe(function(){try{var n=t.store.getState().list;return e.prevLength!==n.length&&(e.fetchData(),e.prevLength=n.length),e.forceUpdate(),Promise.resolve()}catch(t){return Promise.reject(t)}}),n.init&&this.fetchData()},c.componentDidUpdate=function(t,e){return!(!(x(this.state.query,e.query)&&x(this.state.page,e.page)&&x(this.state.pageSize,e.pageSize)&&x(this.state.sort,e.sort))&&this.state.query)||this.fetchData()},c.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},c.getList=function(){var e=t.list;return this.state.ids.map(function(t){return e.find(function(e){return e.id===t})}).filter(Boolean)},c.render=function(){var t,n=f({},this.props,((t={})[e]={__connected:this,list:this.getList(),count:this.state.count,current:{page:this.state.page,pageSize:this.state.pageSize},refresh:this.handleRefresh,query:this.state.query,loading:this.state.loading,configure:this.configure,nextPage:this.handleNextPage,prevPage:this.handlePrevPage},t));return i.createElement(r,n)},a}(i.Component)}}(this,t,e)},(a=[{key:"cache",get:function(){return this._cache||(this._cache={}),this._cache}},{key:"store",get:function(){var t,e,i;return this._store||(this._store=(e={list:[],loading:!1},i=n({name:(t=this).toString().split("(")[0].split(" ")[1]}),r(function(n,r){void 0===n&&(n=e);var o=r.payload;switch(r.type){case"LOAD":return f({},n,{loading:!0});case"UNLOAD":return f({},n,{loading:!1});case"UPSERT":var i=function(t){var e=n.list.find(function(e){return e.id===t.id});n=f({},n,e?{list:n.list.map(function(n){return n===e?t:n})}:{list:[].concat(n.list,[t])})};return Array.isArray(o)?o.forEach(function(e){return i(e instanceof t?e:new t(e))}):i(o instanceof t?o:new t(o)),n;case"UPDATE":return function(t){var e=n.list.find(function(e){return e.id===t.id});e&&(n=f({},n,{list:n.list.map(function(t){return t===e&&Object.assign(t,o),t})}))}(o instanceof t?o:new t(o)),n;case"DELETE":var a=n.list.find(function(t){return t.id===o.id});return f({},n,{list:[].concat(n.list.filter(function(t){return t!==a}))});case"REINIT":return{list:[]};default:return n}},void 0,i(o())))),this._store}},{key:"list",get:function(){return this.store.getState().list}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,a),t}();k.d3Compatible=!0,k.currentPage=1,k.links={first:null,last:null,next:null,prev:null,self:null};var R=function(){function t(e,n){if(Object.getPrototypeOf(this).constructor===t){var r=t.getFieldFromType(e.type);return this.type=r.type,new r(e,n)}return Object.assign(this,e),this.slug=n,this.type=Object.getPrototypeOf(this).constructor.type,this}t.getFieldFromType=function(t){switch(t){case"Select":return S;case"JSON":return A;default:return D}};var e=t.prototype;return e.encode=function(t){return t},e.decode=function(t){return t},t}(),S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).options=[],e}d(e,t);var n=e.prototype;return n.encode=function(t){if(this.options.find(function(e){return e.value===t}))return t;var e=this.options.find(function(e){return e.label===t});return(null==e?void 0:e.value)||null},n.decode=function(t){var e=this.options.find(function(e){return e.value===t});return(null==e?void 0:e.label)||null},e}(R);S.type="Select";var D=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var n=e.prototype;return n.encode=function(t){return(null==t?void 0:t.toString())||""},n.decode=function(t){return(null==t?void 0:t.toString())||""},e}(R);D.type="Text";var A=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var n=e.prototype;return n.encode=function(t){try{return JSON.stringify(t)}catch(t){return"{}"}},n.decode=function(t){try{return JSON.parse(t)}catch(t){return{}}},e}(R);A.type="JSON";var C=function(){function t(){}return t.getSettingsFields=function(){var t=this.settings.schema;return t&&"object"==typeof t?Object.keys(t).map(function(e){var n=t[e];return n instanceof R?n:new R(t[e],e)}):[]},t.onInstall=function(t){return Promise.resolve()},t.onUninstall=function(t){return Promise.resolve()},t}();C.component=function(t){return i.createElement("div",null,"Hello World !")},C.publicComponent=function(t){return i.createElement("div",null,"Hello World !")},C.settings={},C.icon=null,C.handleDoc=function(){return!1};var V={__proto__:null,PlugandworkModel:k,PlugandworkApp:C,SettingsField:R},U=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);U.apiType="apps";var L=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);L.apiType="blocs";var I=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);I.apiType="contexts",I.d3Compatible=!1;var q,H="object"==typeof self?self.FormData:window.FormData,F=["file","title"],M=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.create=function(t){try{var e=this,n="/api/d2/"+e.apiType,r={data:{attributes:t}};if(t.file){var o=new H;o.append("file",t.file);var i=t.file,a=t.title,c=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,F);n="/api/d2/"+e.apiType+"?"+T({name:a||i.name,data:{attributes:c}},{arrayFormat:"brackets"}),r=o}return Promise.resolve(v.post(n,r,{})).then(function(t){var n=t.data.data;return e.clearCache(),e.store.dispatch({type:"UPSERT",payload:n}),new e(n)})}catch(t){return Promise.reject(t)}},e.sync=function(){try{var t=this;return this.subscription=this.subscription||(q||(q=new s.Client("https://rec.plugandwork.fr/faye")),q).subscribe("/users/all",function(e){"refresh_all_doc_thumb"===e.action&&e.did&&t.get(e.did,!1)&&t.get(e.did,!0)}),Promise.resolve(this.subscription)}catch(t){return Promise.reject(t)}},e.unsync=function(){try{return this.subscription?(this.subscription.cancel(),Promise.resolve()):Promise.resolve()}catch(t){return Promise.reject(t)}},e.prototype.download=function(){var t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=encodeURI("/documents/"+this.id+"/upload?mode=attachment"),t.setAttribute("download",this.title),t.click(),document.body.removeChild(t)},e}(k);M.apiType="docs",M.filters={id:"",created_at:"",updated_at:"",title:"",weight:""};var B=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);B.apiType="folders",B.d3Compatible=!1;var Y=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);Y.apiType="groups";var z=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.addDocs=function(t){try{return Promise.resolve(v.post("/api/d1/spaces/"+this.id+"/add_docs",{doc_ids:t})).then(function(){})}catch(t){return Promise.reject(t)}},e}(k);z.apiType="spaces",z.filters={id:"",created_at:"",updated_at:"",title:"",weight:""};var W=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);W.apiType="users",W.d3Compatible=!1;var $=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);$.apiType="batchs";var J=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);J.apiType="datasets";var K=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e}(k);K.apiType="views",K.d3Compatible=!1;var G={__proto__:null,App:U,Bloc:L,Context:I,Doc:M,Folder:B,Group:Y,Space:z,User:W,Batch:$,Dataset:J,View:K},Q=function(){var t=document,e={};return t.cookie.split("; ").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e},X=function(){var t=Q();if(Object.keys(t).includes("paw_token"))return t.paw_token},Z=u.create("plugandwork-frontend",{fetchToken:function(){try{return Promise.resolve(X())}catch(t){return Promise.reject(t)}},fetchUser:function(){try{return Promise.resolve(h(function(){return Promise.resolve(v.get("/api/d2/users/me",{params:{full:!0}})).then(function(t){return new W(t.data.data)})},function(t){return console.log("Error while fetching user",t),null}))}catch(t){return Promise.reject(t)}}});function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tt(t,e)}var nt=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;function it(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var at=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,o=it(t),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))rt.call(n,a)&&(o[a]=n[a]);if(nt){r=nt(n);for(var c=0;c<r.length;c++)ot.call(n,r[c])&&(o[r[c]]=n[r[c]])}}return o},ct="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",st=function(){};if("production"!==process.env.NODE_ENV){var ut=ct,pt={},lt=Function.call.bind(Object.prototype.hasOwnProperty);st=function(t){var e="Warning: "+t;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(t){}}}function ft(t,e,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in t)if(lt(t,i)){var a;try{if("function"!=typeof t[i]){var c=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[i]+"`.");throw c.name="Invariant Violation",c}a=t[i](e,i,r,n,null,ut)}catch(t){a=t}if(!a||a instanceof Error||st((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in pt)){pt[a.message]=!0;var s=o?o():"";st("Failed "+n+" type: "+a.message+(null!=s?s:""))}}}ft.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(pt={})};var dt=ft,ht=Function.call.bind(Object.prototype.hasOwnProperty),vt=function(){};function yt(){return null}function mt(){}function gt(){}"production"!==process.env.NODE_ENV&&(vt=function(t){var e="Warning: "+t;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(t){}}),gt.resetWarningCache=mt;var bt,Et=(function(t){t.exports="production"!==process.env.NODE_ENV?function(t,e){var n="function"==typeof Symbol&&Symbol.iterator,r={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:a(yt),arrayOf:function(t){return a(function(e,n,r,o,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var c=e[n];if(!Array.isArray(c))return new i("Invalid "+o+" `"+a+"` of type `"+u(c)+"` supplied to `"+r+"`, expected an array.");for(var s=0;s<c.length;s++){var p=t(c,s,r,o,a+"["+s+"]",ct);if(p instanceof Error)return p}return null})},element:a(function(e,n,r,o,a){var c=e[n];return t(c)?null:new i("Invalid "+o+" `"+a+"` of type `"+u(c)+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:a(function(t,e,n,r,o){var a=t[e];return p.isValidElementType(a)?null:new i("Invalid "+r+" `"+o+"` of type `"+u(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(t){return a(function(e,n,r,o,a){var c;return e[n]instanceof t?null:new i("Invalid "+o+" `"+a+"` of type `"+((c=e[n]).constructor&&c.constructor.name?c.constructor.name:"<<anonymous>>")+"` supplied to `"+r+"`, expected instance of `"+(t.name||"<<anonymous>>")+"`.")})},node:a(function(t,e,n,r,o){return s(t[e])?null:new i("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(t){return a(function(e,n,r,o,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var c=e[n],s=u(c);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected an object.");for(var p in c)if(ht(c,p)){var l=t(c,p,r,o,a+"."+p,ct);if(l instanceof Error)return l}return null})},oneOf:function(t){if(!Array.isArray(t))return"production"!==process.env.NODE_ENV&&vt(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),yt;function e(e,n,r,a,c){for(var s=e[n],u=0;u<t.length;u++)if(o(s,t[u]))return null;var p=JSON.stringify(t,function(t,e){return"symbol"===l(e)?String(e):e});return new i("Invalid "+a+" `"+c+"` of value `"+String(s)+"` supplied to `"+r+"`, expected one of "+p+".")}return a(e)},oneOfType:function(t){if(!Array.isArray(t))return"production"!==process.env.NODE_ENV&&vt("Invalid argument supplied to oneOfType, expected an instance of array."),yt;for(var e=0;e<t.length;e++){var n=t[e];if("function"!=typeof n)return vt("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+f(n)+" at index "+e+"."),yt}return a(function(e,n,r,o,a){for(var c=0;c<t.length;c++)if(null==(0,t[c])(e,n,r,o,a,ct))return null;return new i("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")})},shape:function(t){return a(function(e,n,r,o,a){var c=e[n],s=u(c);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");for(var p in t){var l=t[p];if(l){var f=l(c,p,r,o,a+"."+p,ct);if(f)return f}}return null})},exact:function(t){return a(function(e,n,r,o,a){var c=e[n],s=u(c);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");var p=at({},e[n],t);for(var l in p){var f=t[l];if(!f)return new i("Invalid "+o+" `"+a+"` key `"+l+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var d=f(c,l,r,o,a+"."+l,ct);if(d)return d}return null})}};function o(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function i(t){this.message=t,this.stack=""}function a(t){function e(e,n,r,o,a,c,s){if(o=o||"<<anonymous>>",c=c||r,s!==ct){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}return null==n[r]?e?new i(null===n[r]?"The "+a+" `"+c+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+a+" `"+c+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:t(n,r,o,a,c)}process;var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function c(t){return a(function(e,n,r,o,a,c){var s=e[n];return u(s)!==t?new i("Invalid "+o+" `"+a+"` of type `"+l(s)+"` supplied to `"+r+"`, expected `"+t+"`."):null})}function s(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(s);if(null===e||t(e))return!0;var r=function(t){var e=t&&(n&&t[n]||t["@@iterator"]);if("function"==typeof e)return e}(e);if(!r)return!1;var o,i=r.call(e);if(r!==e.entries){for(;!(o=i.next()).done;)if(!s(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!s(a[1]))return!1}return!0;default:return!1}}function u(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||!!e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}(e,t)?"symbol":e}function l(t){if(null==t)return""+t;var e=u(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function f(t){var e=l(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}return i.prototype=Error.prototype,r.checkPropTypes=dt,r.resetWarningCache=dt.resetWarningCache,r.PropTypes=r,r}(p.isElement):function(){function t(t,e,n,r,o,i){if(i!==ct){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:gt,resetWarningCache:mt};return n.PropTypes=n,n}()}(bt={exports:{}}),bt.exports);function wt(){return(wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ot(t){return"/"===t.charAt(0)}function Pt(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}var _t="production"===process.env.NODE_ENV;function Nt(t,e){if(!_t){if(t)return;var n="Warning: "+e;"undefined"!=typeof console&&console.warn(n);try{throw Error(n)}catch(t){}}}var jt="production"===process.env.NODE_ENV;function Tt(t,e){if(!t){if(jt)throw new Error("Invariant failed");throw new Error("Invariant failed: "+(e||""))}}function xt(t){return"/"===t.charAt(0)?t:"/"+t}function kt(t){return"/"===t.charAt(0)?t.substr(1):t}function Rt(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}function St(t,e){return Rt(t,e)?t.substr(e.length):t}function Dt(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function At(t){var e=t.search,n=t.hash,r=t.pathname||"/";return e&&"?"!==e&&(r+="?"===e.charAt(0)?e:"?"+e),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function Ct(t,e,n,r){var o;"string"==typeof t?(o=function(t){var e=t||"/",n="",r="",o=e.indexOf("#");-1!==o&&(r=e.substr(o),e=e.substr(0,o));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(o=wt({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],o=e&&e.split("/")||[],i=t&&Ot(t),a=e&&Ot(e),c=i||a;if(t&&Ot(t)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var s=o[o.length-1];n="."===s||".."===s||""===s}else n=!1;for(var u=0,p=o.length;p>=0;p--){var l=o[p];"."===l?Pt(o,p):".."===l?(Pt(o,p),u++):u&&(Pt(o,p),u--)}if(!c)for(;u--;u)o.unshift("..");!c||""===o[0]||o[0]&&Ot(o[0])||o.unshift("");var f=o.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f}(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function Vt(){var t=null,e=[];return{setPrompt:function(e){return"production"!==process.env.NODE_ENV&&Nt(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,o){if(null!=t){var i="function"==typeof t?t(e,n):t;"string"==typeof i?"function"==typeof r?r(i,o):("production"!==process.env.NODE_ENV&&Nt(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==i)}else o(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}}var Ut=!("undefined"==typeof window||!window.document||!window.document.createElement);function Lt(t,e){e(window.confirm(t))}function It(){try{return window.history.state||{}}catch(t){return{}}}function qt(t){void 0===t&&(t={}),Ut||("production"!==process.env.NODE_ENV?Tt(!1,"Browser history needs a DOM"):Tt(!1));var e,n=window.history,r=(-1===(e=window.navigator.userAgent).indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),i=t.forceRefresh,a=void 0!==i&&i,c=t.getUserConfirmation,s=void 0===c?Lt:c,u=t.keyLength,p=void 0===u?6:u,l=t.basename?Dt(xt(t.basename)):"";function f(t){var e=t||{},n=e.key,r=e.state,o=window.location,i=o.pathname+o.search+o.hash;return"production"!==process.env.NODE_ENV&&Nt(!l||Rt(i,l),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+l+'".'),l&&(i=St(i,l)),Ct(i,r,n)}function d(){return Math.random().toString(36).substr(2,p)}var h=Vt();function v(t){wt(T,t),T.length=n.length,h.notifyListeners(T.location,T.action)}function y(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||b(f(t.state))}function m(){b(f(It()))}var g=!1;function b(t){g?(g=!1,v()):h.confirmTransitionTo(t,"POP",s,function(e){e?v({action:"POP",location:t}):function(t){var e=w.indexOf(T.location.key);-1===e&&(e=0);var n=w.indexOf(t.key);-1===n&&(n=0);var r=e-n;r&&(g=!0,P(r))}(t)})}var E=f(It()),w=[E.key];function O(t){return l+At(t)}function P(t){n.go(t)}var _=0;function N(t){1===(_+=t)&&1===t?(window.addEventListener("popstate",y),o&&window.addEventListener("hashchange",m)):0===_&&(window.removeEventListener("popstate",y),o&&window.removeEventListener("hashchange",m))}var j=!1,T={length:n.length,action:"POP",location:E,createHref:O,push:function(t,e){"production"!==process.env.NODE_ENV&&Nt(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=Ct(t,e,d(),T.location);h.confirmTransitionTo(o,"PUSH",s,function(t){if(t){var e=O(o),i=o.state;if(r)if(n.pushState({key:o.key,state:i},null,e),a)window.location.href=e;else{var c=w.indexOf(T.location.key),s=w.slice(0,c+1);s.push(o.key),w=s,v({action:"PUSH",location:o})}else"production"!==process.env.NODE_ENV&&Nt(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},replace:function(t,e){"production"!==process.env.NODE_ENV&&Nt(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=Ct(t,e,d(),T.location);h.confirmTransitionTo(o,"REPLACE",s,function(t){if(t){var e=O(o),i=o.state;if(r)if(n.replaceState({key:o.key,state:i},null,e),a)window.location.replace(e);else{var c=w.indexOf(T.location.key);-1!==c&&(w[c]=o.key),v({action:"REPLACE",location:o})}else"production"!==process.env.NODE_ENV&&Nt(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},go:P,goBack:function(){P(-1)},goForward:function(){P(1)},block:function(t){void 0===t&&(t=!1);var e=h.setPrompt(t);return j||(N(1),j=!0),function(){return j&&(j=!1,N(-1)),e()}},listen:function(t){var e=h.appendListener(t);return N(1),function(){N(-1),e()}}};return T}var Ht={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+kt(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:kt,decodePath:xt},slash:{encodePath:xt,decodePath:xt}};function Ft(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function Mt(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function Bt(t){window.location.replace(Ft(window.location.href)+"#"+t)}function Yt(t){void 0===t&&(t={}),Ut||("production"!==process.env.NODE_ENV?Tt(!1,"Hash history needs a DOM"):Tt(!1));var e=window.history,n=-1===window.navigator.userAgent.indexOf("Firefox"),r=t.getUserConfirmation,o=void 0===r?Lt:r,i=t.hashType,a=void 0===i?"slash":i,c=t.basename?Dt(xt(t.basename)):"",s=Ht[a],u=s.encodePath,p=s.decodePath;function l(){var t=p(Mt());return"production"!==process.env.NODE_ENV&&Nt(!c||Rt(t,c),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+c+'".'),c&&(t=St(t,c)),Ct(t)}var f=Vt();function d(t){wt(N,t),N.length=e.length,f.notifyListeners(N.location,N.action)}var h=!1,v=null;function y(){var t,e,n=Mt(),r=u(n);if(n!==r)Bt(r);else{var i=l();if(!h&&(t=N.location).pathname===(e=i).pathname&&t.search===e.search&&t.hash===e.hash)return;if(v===At(i))return;v=null,function(t){h?(h=!1,d()):f.confirmTransitionTo(t,"POP",o,function(e){e?d({action:"POP",location:t}):function(t){var e=E.lastIndexOf(At(N.location));-1===e&&(e=0);var n=E.lastIndexOf(At(t));-1===n&&(n=0);var r=e-n;r&&(h=!0,w(r))}(t)})}(i)}}var m=Mt(),g=u(m);m!==g&&Bt(g);var b=l(),E=[At(b)];function w(t){"production"!==process.env.NODE_ENV&&Nt(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)}var O=0;function P(t){1===(O+=t)&&1===t?window.addEventListener("hashchange",y):0===O&&window.removeEventListener("hashchange",y)}var _=!1,N={length:e.length,action:"POP",location:b,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=Ft(window.location.href)),n+"#"+u(c+At(t))},push:function(t,e){"production"!==process.env.NODE_ENV&&Nt(void 0===e,"Hash history cannot push state; it is ignored");var n=Ct(t,void 0,void 0,N.location);f.confirmTransitionTo(n,"PUSH",o,function(t){if(t){var e=At(n),r=u(c+e);if(Mt()!==r){v=e,function(t){window.location.hash=t}(r);var o=E.lastIndexOf(At(N.location)),i=E.slice(0,o+1);i.push(e),E=i,d({action:"PUSH",location:n})}else"production"!==process.env.NODE_ENV&&Nt(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),d()}})},replace:function(t,e){"production"!==process.env.NODE_ENV&&Nt(void 0===e,"Hash history cannot replace state; it is ignored");var n=Ct(t,void 0,void 0,N.location);f.confirmTransitionTo(n,"REPLACE",o,function(t){if(t){var e=At(n),r=u(c+e);Mt()!==r&&(v=e,Bt(r));var o=E.indexOf(At(N.location));-1!==o&&(E[o]=e),d({action:"REPLACE",location:n})}})},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(t){void 0===t&&(t=!1);var e=f.setPrompt(t);return _||(P(1),_=!0),function(){return _&&(_=!1,P(-1)),e()}},listen:function(t){var e=f.appendListener(t);return P(1),function(){P(-1),e()}}};return N}function zt(t,e,n){return Math.min(Math.max(t,e),n)}function Wt(t){void 0===t&&(t={});var e=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,o=t.initialIndex,i=void 0===o?0:o,a=t.keyLength,c=void 0===a?6:a,s=Vt();function u(t){wt(h,t),h.length=h.entries.length,s.notifyListeners(h.location,h.action)}function p(){return Math.random().toString(36).substr(2,c)}var l=zt(i,0,r.length-1),f=r.map(function(t){return Ct(t,void 0,"string"==typeof t?p():t.key||p())});function d(t){var n=zt(h.index+t,0,h.entries.length-1),r=h.entries[n];s.confirmTransitionTo(r,"POP",e,function(t){t?u({action:"POP",location:r,index:n}):u()})}var h={length:f.length,action:"POP",location:f[l],index:l,entries:f,createHref:At,push:function(t,n){"production"!==process.env.NODE_ENV&&Nt(!("object"==typeof t&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=Ct(t,n,p(),h.location);s.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=h.index+1,n=h.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),u({action:"PUSH",location:r,index:e,entries:n})}})},replace:function(t,n){"production"!==process.env.NODE_ENV&&Nt(!("object"==typeof t&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=Ct(t,n,p(),h.location);s.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(h.entries[h.index]=r,u({action:"REPLACE",location:r}))})},go:d,goBack:function(){d(-1)},goForward:function(){d(1)},canGo:function(t){var e=h.index+t;return e>=0&&e<h.entries.length},block:function(t){return void 0===t&&(t=!1),s.setPrompt(t)},listen:function(t){return s.appendListener(t)}};return h}var $t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function Jt(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter(function(e){return e!==t})},get:function(){return t},set:function(n,r){t=n,e.forEach(function(e){return e(t,r)})}}}var Kt=i.createContext||function(t,e){var n,r,o="__create-react-context-"+function(){var t="__global_unique_id__";return $t[t]=($t[t]||0)+1}()+"__",i=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=Jt(e.props.value),e}et(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[o]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,o=t.value;((i=r)===(a=o)?0!==i||1/i==1/a:i!=i&&a!=a)?n=0:(n="function"==typeof e?e(r,o):1073741823,"production"!==process.env.NODE_ENV&&Nt((1073741823&n)===n,"calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: "+n),0!=(n|=0)&&this.emitter.set(t.value,n))}var i,a},r.render=function(){return this.props.children},n}(a);i.childContextTypes=((n={})[o]=Et.object.isRequired,n);var c=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!=((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}et(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=null==e?1073741823:e},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=null==t?1073741823:t},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(a);return c.contextTypes=((r={})[o]=Et.object,r),{Provider:i,Consumer:c}},Gt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Qt=function t(e,n,r){return Gt(n)||(r=n||r,n=[]),r=r||{},e instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ce(t,e)}(e,n):Gt(e)?function(e,n,r){for(var o=[],i=0;i<e.length;i++)o.push(t(e[i],n,r).source);return ce(new RegExp("(?:"+o.join("|")+")",se(r)),n)}(e,n,r):function(t,e,n){return ue(ne(t,n),e,n)}(e,n,r)},Xt=ne,Zt=oe,te=ue,ee=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ne(t,e){for(var n,r=[],o=0,i=0,a="",c=e&&e.delimiter||"/";null!=(n=ee.exec(t));){var s=n[0],u=n[1],p=n.index;if(a+=t.slice(i,p),i=p+s.length,u)a+=u[1];else{var l=t[i],f=n[2],d=n[3],h=n[4],v=n[5],y=n[6],m=n[7];a&&(r.push(a),a="");var g=n[2]||c,b=h||v;r.push({name:d||o++,prefix:f||"",delimiter:g,optional:"?"===y||"*"===y,repeat:"+"===y||"*"===y,partial:null!=f&&null!=l&&l!==f,asterisk:!!m,pattern:b?ae(b):m?".*":"[^"+ie(g)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&r.push(a),r}function re(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function oe(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",se(e)));return function(e,r){for(var o="",i=e||{},a=(r||{}).pretty?re:encodeURIComponent,c=0;c<t.length;c++){var s=t[c];if("string"!=typeof s){var u,p=i[s.name];if(null==p){if(s.optional){s.partial&&(o+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be defined')}if(Gt(p)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<p.length;l++){if(u=a(p[l]),!n[c].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received `'+JSON.stringify(u)+"`");o+=(0===l?s.prefix:s.delimiter)+u}}else{if(u=s.asterisk?encodeURI(p).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):a(p),!n[c].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+u+'"');o+=s.prefix+u}}else o+=s}return o}}function ie(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ae(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function ce(t,e){return t.keys=e,t}function se(t){return t&&t.sensitive?"":"i"}function ue(t,e,n){Gt(e)||(n=e||n,e=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,i="",a=0;a<t.length;a++){var c=t[a];if("string"==typeof c)i+=ie(c);else{var s=ie(c.prefix),u="(?:"+c.pattern+")";e.push(c),c.repeat&&(u+="(?:"+s+u+")*"),i+=u=c.optional?c.partial?s+"("+u+")?":"(?:"+s+"("+u+"))?":s+"("+u+")"}}var p=ie(n.delimiter||"/"),l=i.slice(-p.length)===p;return r||(i=(l?i.slice(0,-p.length):i)+"(?:"+p+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+p+"|$)",ce(new RegExp("^"+i,se(n)),e)}function pe(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}Qt.parse=Xt,Qt.compile=function(t,e){return oe(ne(t,e),e)},Qt.tokensToFunction=Zt,Qt.tokensToRegExp=te;var le=function(t){var e=Kt();return e.displayName="Router-History",e}(),fe=function(t){var e=Kt();return e.displayName="Router",e}(),de=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen(function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t})),n}et(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return i.createElement(fe.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(le.Provider,{children:this.props.children||null,value:this.props.history}))},e}(i.Component);"production"!==process.env.NODE_ENV&&(de.propTypes={children:Et.node,history:Et.object.isRequired,staticContext:Et.object},de.prototype.componentDidUpdate=function(t){"production"!==process.env.NODE_ENV&&Nt(t.history===this.props.history,"You cannot change <Router history>")});var he=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).history=Wt(e.props),e}return et(e,t),e.prototype.render=function(){return i.createElement(de,{history:this.history,children:this.props.children})},e}(i.Component);"production"!==process.env.NODE_ENV&&(he.propTypes={initialEntries:Et.array,initialIndex:Et.number,getUserConfirmation:Et.func,keyLength:Et.number,children:Et.node},he.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Nt(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")}),"production"!==process.env.NODE_ENV&&Et.oneOfType([Et.func,Et.string]),"production"!==process.env.NODE_ENV&&Et.oneOfType([Et.string,Et.object]);var ve={},ye=0;function me(t,e){void 0===e&&(e={}),("string"==typeof e||Array.isArray(e))&&(e={path:e});var n=e.exact,r=void 0!==n&&n,o=e.strict,i=void 0!==o&&o,a=e.sensitive,c=void 0!==a&&a;return[].concat(e.path).reduce(function(e,n){if(!n&&""!==n)return null;if(e)return e;var o=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=ve[n]||(ve[n]={});if(r[t])return r[t];var o=[],i={regexp:Qt(t,o,e),keys:o};return ye<1e4&&(r[t]=i,ye++),i}(n,{end:r,strict:i,sensitive:c}),a=o.keys,s=o.regexp.exec(t);if(!s)return null;var u=s[0],p=s.slice(1),l=t===u;return r&&!l?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:l,params:a.reduce(function(t,e,n){return t[e.name]=p[n],t},{})}},null)}function ge(t){return 0===i.Children.count(t)}function be(t,e,n){var r=t(e);return"production"!==process.env.NODE_ENV&&Nt(void 0!==r,"You returned `undefined` from the `children` function of <Route"+(n?' path="'+n+'"':"")+">, but you should have returned a React element or `null`"),r||null}var Ee=function(t){function e(){return t.apply(this,arguments)||this}return et(e,t),e.prototype.render=function(){var t=this;return i.createElement(fe.Consumer,null,function(e){e||("production"!==process.env.NODE_ENV?Tt(!1,"You should not use <Route> outside a <Router>"):Tt(!1));var n=t.props.location||e.location,r=wt({},e,{location:n,match:t.props.computedMatch?t.props.computedMatch:t.props.path?me(n.pathname,t.props):e.match}),o=t.props,a=o.children,c=o.component,s=o.render;return Array.isArray(a)&&0===a.length&&(a=null),i.createElement(fe.Provider,{value:r},r.match?a?"function"==typeof a?"production"!==process.env.NODE_ENV?be(a,r,t.props.path):a(r):a:c?i.createElement(c,r):s?s(r):null:"function"==typeof a?"production"!==process.env.NODE_ENV?be(a,r,t.props.path):a(r):null)})},e}(i.Component);function we(t){return"/"===t.charAt(0)?t:"/"+t}function Oe(t,e){if(!t)return e;var n=we(t);return 0!==e.pathname.indexOf(n)?e:wt({},e,{pathname:e.pathname.substr(n.length)})}function Pe(t){return"string"==typeof t?t:At(t)}function _e(t){return function(){"production"!==process.env.NODE_ENV?Tt(!1,"You cannot %s with <StaticRouter>"):Tt(!1)}}function Ne(){}"production"!==process.env.NODE_ENV&&(Ee.propTypes={children:Et.oneOfType([Et.func,Et.node]),component:function(t,e){if(t[e]&&!l(t[e]))return new Error("Invalid prop 'component' supplied to 'Route': the prop is not a valid React component")},exact:Et.bool,location:Et.object,path:Et.oneOfType([Et.string,Et.arrayOf(Et.string)]),render:Et.func,sensitive:Et.bool,strict:Et.bool},Ee.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Nt(!(this.props.children&&!ge(this.props.children)&&this.props.component),"You should not use <Route component> and <Route children> in the same route; <Route component> will be ignored"),"production"!==process.env.NODE_ENV&&Nt(!(this.props.children&&!ge(this.props.children)&&this.props.render),"You should not use <Route render> and <Route children> in the same route; <Route render> will be ignored"),"production"!==process.env.NODE_ENV&&Nt(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored")},Ee.prototype.componentDidUpdate=function(t){"production"!==process.env.NODE_ENV&&Nt(!(this.props.location&&!t.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),"production"!==process.env.NODE_ENV&&Nt(!(!this.props.location&&t.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')});var je=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).handlePush=function(t){return e.navigateTo(t,"PUSH")},e.handleReplace=function(t){return e.navigateTo(t,"REPLACE")},e.handleListen=function(){return Ne},e.handleBlock=function(){return Ne},e}et(e,t);var n=e.prototype;return n.navigateTo=function(t,e){var n=this.props,r=n.basename,o=void 0===r?"":r,i=n.context,a=void 0===i?{}:i;a.action=e,a.location=function(t,e){return t?wt({},e,{pathname:we(t)+e.pathname}):e}(o,Ct(t)),a.url=Pe(a.location)},n.render=function(){var t=this.props,e=t.basename,n=void 0===e?"":e,r=t.context,o=void 0===r?{}:r,a=t.location,c=void 0===a?"/":a,s=pe(t,["basename","context","location"]),u={createHref:function(t){return we(n+Pe(t))},action:"POP",location:Oe(n,Ct(c)),push:this.handlePush,replace:this.handleReplace,go:_e(),goBack:_e(),goForward:_e(),listen:this.handleListen,block:this.handleBlock};return i.createElement(de,wt({},s,{history:u,staticContext:o}))},e}(i.Component);"production"!==process.env.NODE_ENV&&(je.propTypes={basename:Et.string,context:Et.object,location:Et.oneOfType([Et.string,Et.object])},je.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Nt(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")});var Te=function(t){function e(){return t.apply(this,arguments)||this}return et(e,t),e.prototype.render=function(){var t=this;return i.createElement(fe.Consumer,null,function(e){e||("production"!==process.env.NODE_ENV?Tt(!1,"You should not use <Switch> outside a <Router>"):Tt(!1));var n,r,o=t.props.location||e.location;return i.Children.forEach(t.props.children,function(t){if(null==r&&i.isValidElement(t)){n=t;var a=t.props.path||t.props.from;r=a?me(o.pathname,wt({},t.props,{path:a})):e.match}}),r?i.cloneElement(n,{location:o,computedMatch:r}):null})},e}(i.Component);if("production"!==process.env.NODE_ENV&&(Te.propTypes={children:Et.node,location:Et.object},Te.prototype.componentDidUpdate=function(t){"production"!==process.env.NODE_ENV&&Nt(!(this.props.location&&!t.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),"production"!==process.env.NODE_ENV&&Nt(!(!this.props.location&&t.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')}),"production"!==process.env.NODE_ENV&&"undefined"!=typeof window){var xe=window,ke="__react_router_build__",Re={cjs:"CommonJS",esm:"ES modules",umd:"UMD"};if(xe[ke]&&"esm"!==xe[ke])throw new Error("You are loading the "+Re.esm+" build of React Router on a page that is already running the "+Re[xe[ke]]+" build, so things won't work right.");xe[ke]="esm"}var Se=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).history=qt(e.props),e}return et(e,t),e.prototype.render=function(){return i.createElement(de,{history:this.history,children:this.props.children})},e}(i.Component);"production"!==process.env.NODE_ENV&&(Se.propTypes={basename:Et.string,children:Et.node,forceRefresh:Et.bool,getUserConfirmation:Et.func,keyLength:Et.number},Se.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Nt(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")});var De=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).history=Yt(e.props),e}return et(e,t),e.prototype.render=function(){return i.createElement(de,{history:this.history,children:this.props.children})},e}(i.Component);"production"!==process.env.NODE_ENV&&(De.propTypes={basename:Et.string,children:Et.node,getUserConfirmation:Et.func,hashType:Et.oneOf(["hashbang","noslash","slash"])},De.prototype.componentDidMount=function(){"production"!==process.env.NODE_ENV&&Nt(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")});var Ae=function(t,e){return"function"==typeof t?t(e):t},Ce=function(t,e){return"string"==typeof t?Ct(t,null,null,e):t},Ve=function(t){return t},Ue=i.forwardRef;void 0===Ue&&(Ue=Ve);var Le=Ue(function(t,e){var n=t.innerRef,r=t.navigate,o=t.onClick,a=pe(t,["innerRef","navigate","onClick"]),c=a.target,s=wt({},a,{onClick:function(t){try{o&&o(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||c&&"_self"!==c||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return s.ref=Ve!==Ue&&e||n,i.createElement("a",s)});"production"!==process.env.NODE_ENV&&(Le.displayName="LinkAnchor");var Ie=Ue(function(t,e){var n=t.component,r=void 0===n?Le:n,o=t.replace,a=t.to,c=t.innerRef,s=pe(t,["component","replace","to","innerRef"]);return i.createElement(fe.Consumer,null,function(t){t||("production"!==process.env.NODE_ENV?Tt(!1,"You should not use <Link> outside a <Router>"):Tt(!1));var n=t.history,u=Ce(Ae(a,t.location),t.location),p=u?n.createHref(u):"",l=wt({},s,{href:p,navigate:function(){var e=Ae(a,t.location);(o?n.replace:n.push)(e)}});return Ve!==Ue?l.ref=e||c:l.innerRef=c,i.createElement(r,l)})});if("production"!==process.env.NODE_ENV){var qe=Et.oneOfType([Et.string,Et.object,Et.func]),He=Et.oneOfType([Et.string,Et.func,Et.shape({current:Et.any})]);Ie.displayName="Link",Ie.propTypes={innerRef:He,onClick:Et.func,replace:Et.bool,target:Et.string,to:qe.isRequired}}var Fe=function(t){return t},Me=i.forwardRef;void 0===Me&&(Me=Fe);var Be=Me(function(t,e){var n=t["aria-current"],r=void 0===n?"page":n,o=t.activeClassName,a=void 0===o?"active":o,c=t.activeStyle,s=t.className,u=t.exact,p=t.isActive,l=t.location,f=t.sensitive,d=t.strict,h=t.style,v=t.to,y=t.innerRef,m=pe(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(fe.Consumer,null,function(t){t||("production"!==process.env.NODE_ENV?Tt(!1,"You should not use <NavLink> outside a <Router>"):Tt(!1));var n=l||t.location,o=Ce(Ae(v,n),n),g=o.pathname,b=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=b?me(n.pathname,{path:b,exact:u,sensitive:f,strict:d}):null,w=!!(p?p(E,n):E),O=w?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(t){return t}).join(" ")}(s,a):s,P=w?wt({},h,{},c):h,_=wt({"aria-current":w&&r||null,className:O,style:P,to:o},m);return Fe!==Me?_.ref=e||y:_.innerRef=y,i.createElement(Ie,_)})});if("production"!==process.env.NODE_ENV){Be.displayName="NavLink";var Ye=Et.oneOf(["page","step","location","date","time","true"]);Be.propTypes=wt({},Ie.propTypes,{"aria-current":Ye,activeClassName:Et.string,activeStyle:Et.object,className:Et.string,exact:Et.bool,isActive:Et.func,location:Et.object,sensitive:Et.bool,strict:Et.bool,style:Et.object})}var ze=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var n=e.prototype;return n.componentDidMount=function(){},n.render=function(){var t=this.props.app,e=t.component,n=t.publicComponent,r=n&&function(t){return function(e){function n(t){var n;return(n=e.call(this,t)||this).state={contact:null,ready:!1},n}d(n,e);var r=n.prototype;return r.componentDidMount=function(){try{var t=this,e=function(){t.setState(n)};U.apiType="contacts/apps",M.apiType="contacts/docs",z.apiType="contacts/spaces";var n={ready:!0},r=h(function(){return Promise.resolve(v.post("/api/pin_token?token="+t.props.match.params.contactToken)).then(function(t){var e=t.data;n.contact=e.id,v.interceptors.request.use(function(t){return Z.getToken()&&(t.headers.Authorization="Bearer "+e.access_token),t},function(t){return Promise.reject(t)})})},function(t){console.error(t)});return Promise.resolve(r&&r.then?r.then(e):e())}catch(t){return Promise.reject(t)}},r.render=function(){return this.state.ready?i.createElement(t,f({},this.props,{contact:this.state.contact})):null},n}(i.Component)}(n),o=e&&function(t){return function(e){function n(t){var n;return(n=e.call(this,t)||this).state={ready:!1},n}d(n,e);var r=n.prototype;return r.componentDidMount=function(){try{var t=this,e=function(){if(Z.user)t.setState({ready:!0});else if("production"!==process.env.NODE_ENV){var e=prompt("Entrez votre token de connexion");localStorage.setItem("paw_token",e),window.location.reload()}else{var n=process.env.REACT_APP_PAW_HOST||"";window.location.href=n+"/users/sign_in?identity_provider=paw-front&callback_url="+window.location.origin}};U.apiType="apps",M.apiType="docs",z.apiType="spaces";var n=h(function(){var t=X()||localStorage.getItem("paw_token");return t&&Z.setToken(t),v.interceptors.request.use(function(t){var e=Z.getToken();return e&&(t.headers.Authorization="Bearer "+e),t},function(t){return Promise.reject(t)}),Promise.resolve(Z.sync()).then(function(){})},function(t){console.error(t)});return Promise.resolve(n&&n.then?n.then(e):e())}catch(t){return Promise.reject(t)}},r.render=function(){return this.state.ready?i.createElement(t,this.props):null},n}(i.Component)}(e);return i.createElement(Se,{basename:this.props.basename},i.createElement(Te,null,i.createElement(Ee,{component:r,path:"/public/:contactToken"}),i.createElement(Ee,{component:o})))},e}(i.Component),We={__proto__:null,authmanager:Z,logout:function(){try{return v.post("/api/logout").then(function(){return Z.logout()}).catch(function(t){console.error("Error during logout request",t)}),Promise.resolve()}catch(t){return Promise.reject(t)}},getTokenFromCookie:X,setTokenFromCookie:function(){var t=Q();Object.keys(t).includes("paw_token")?localStorage.setItem("paw_token",t.paw_token):localStorage.removeItem("paw_token")},ReactEntry:ze},$e={lib:V,models:G,utils:We};export default $e;export{V as lib,G as models,We as utils};
//# sourceMappingURL=index.modern.js.map
